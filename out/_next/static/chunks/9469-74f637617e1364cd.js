"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9469],{49932:function(e,n,r){var t=r(59499),i=r(50029),o=r(16835),a=r(87794),u=r.n(a),s=r(49501),c=r(31518),d=r(71862),l=r(27262),p=r(69137),v=r(44232),f=r(12614),m=r(90849),y=r(67294),O=r(85893);function g(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?g(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var b=(0,y.memo)((function(e){var n,r=e.inputAmount,a=e.onStateChange,c=e.tokenApproveOn,p=e.id,f=e.onSLPPermit,m=(0,s.mV)().i18n,g=(0,l.qL)(null===r||void 0===r?void 0:r.wrapped,c),b=(0,o.Z)(g,2),h=b[0],N=b[1],w=(0,v.j3)(["Uniswap V2","Sushi LP Token"].includes(null!==(n=null===r||void 0===r?void 0:r.currency.name)&&void 0!==n?n:"")?null===r||void 0===r?void 0:r.wrapped:void 0,c),A=w.gatherPermitSignature,S=w.signatureData,D=(0,y.useCallback)((0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=12;break}return e.prev=1,e.next=4,A();case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),e.next=10,N();case 10:e.next=14;break;case 12:return e.next=14,N();case 14:case"end":return e.stop()}}),e,null,[[1,6]])}))),[N,A]);return(0,y.useEffect)((function(){if(S&&r&&h===l.UK.NOT_APPROVED){if(!f)throw new Error("onSLPPermit callback not defined");f(S)}}),[h,r,f,a,S]),(0,y.useEffect)((function(){if(null!==r&&void 0!==r&&r.currency.wrapped.address)return a((function(e){return P(P({},e),{},(0,t.Z)({},r.currency.wrapped.address,S?l.UK.APPROVED:h))})),function(){return a((function(e){var n=P({},e);return n[r.currency.wrapped.address]&&delete n[r.currency.wrapped.address],n}))}}),[h,r,null===r||void 0===r?void 0:r.currency.wrapped.address,a,S]),!S&&[l.UK.NOT_APPROVED,l.UK.PENDING].includes(h)?(0,O.jsx)(d.ZP,{fullWidth:!0,id:p,loading:h===l.UK.PENDING,color:"blue",onClick:D,children:m._(m._("Approve {0}",{0:null===r||void 0===r?void 0:r.currency.symbol}))}):(0,O.jsx)(O.Fragment,{})}));n.Z=function(e){var n=e.spendFromWallet,r=void 0===n||n,t=e.inputAmounts,o=e.tokenApproveOn,a=e.children,v=e.withPermit,g=void 0!==v&&v,P=e.masterContractAddress,h=e.permit,N=e.onPermit,w=e.onSLPPermit,A=e.onPermitError,S=(0,f.aQ)().account,D=(0,s.mV)().i18n,k=(0,m.mq)(),E=(0,y.useState)({}),Z=E[0],j=E[1],T=(0,y.useState)(!1),x=T[0],I=T[1],L=(0,p.ZP)(g?P:void 0,{}),C=L.approve,U=L.approvalState,M=L.getPermit,_=L.permit,G=Object.values(Z).some((function(e){return e===l.UK.UNKNOWN}))||!!g&&U===p.kG.UNKNOWN,W=(Object.values(Z).every((function(e){return e===l.UK.APPROVED}))||!r)&&(!g||U===p.kG.APPROVED),B=(0,y.useCallback)((0,i.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g||x){e.next=7;break}return e.next=3,M();case 3:null!==(n=e.sent)&&void 0!==n&&n.signature&&N?N(n.signature):A&&(I(!0),A()),e.next=9;break;case 7:return e.next=9,C();case 9:case"end":return e.stop()}}),e)}))),[C,M,N,A,x,g]);return(0,O.jsxs)("div",{className:"flex flex-col gap-3",children:[t.every((function(e){return null===e||void 0===e?void 0:e.greaterThan(c.xE)}))&&[p.kG.NOT_APPROVED,p.kG.PENDING].includes(U)&&(0,O.jsx)(d.ZP,{id:"btn-approve",loading:U===p.kG.PENDING,onClick:B,children:D._(D._("Approve BentoBox"))}),o&&t.reduce((function(e,n,r){return null!==n&&void 0!==n&&n.currency.isNative||null===n||void 0===n||!n.greaterThan(c.xE)||e.push((0,O.jsx)(b,{id:"btn-approve",inputAmount:n,onStateChange:j,tokenApproveOn:o,onSLPPermit:w},r)),e}),[]),S?a({approved:W||!!h,loading:G,permit:_}):(0,O.jsx)(d.ZP,{color:"gradient",onClick:k,children:D._(D._("Connect Wallet"))})]})}},61647:function(e,n,r){r.d(n,{C:function(){return s}});var t=r(31518),i=r(2886),o=r(67294),a=r(54907),u=function(e){var n=(0,o.useMemo)((function(){return e.map((function(e){return[null===e||void 0===e?void 0:e.wrapped.address]}))}),[e]),r=(0,a.rO)(),u=(0,i.es)(r,"totals",n),s=(0,o.useMemo)((function(){return u.some((function(e){return e.loading}))}),[u]);return(0,o.useMemo)((function(){return{rebases:e.reduce((function(e,n,r){var i=u[r];return n&&(null!==i&&void 0!==i&&i.result?e[n.wrapped.address]={token:n.wrapped,base:t.QA.BigInt(i.result.base.toString()),elastic:t.QA.BigInt(i.result.elastic.toString())}:e[n.wrapped.address]=void 0),e}),{}),loading:s}}),[s,u,e])},s=function(e){var n=(0,o.useMemo)((function(){return[e]}),[e]),r=u(n),t=r.rebases,i=r.loading;return(0,o.useMemo)((function(){return e&&!i?{rebase:t[null===e||void 0===e?void 0:e.wrapped.address],loading:i}:{rebase:void 0,loading:i}}),[i,t,e])};n.Z=u},92037:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(2886),i=r(54907);function o(){var e,n,r=(0,i.h$)();return null===(e=(0,t.Wk)(r,"getCurrentBlockTimestamp"))||void 0===e||null===(n=e.result)||void 0===n?void 0:n[0]}},44232:function(e,n,r){r.d(n,{j3:function(){return x},pO:function(){return T}});var t,i,o,a,u,s=r(50029),c=r(59499),d=r(87794),l=r.n(d),p=r(16441),v=r(31518),f=r(33624),m=r(2886),y=r(12614),O=r(67294),g=r(54907),P=r(67993),b=r(66367);function h(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function N(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?h(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}!function(e){e[e.AMOUNT=1]="AMOUNT",e[e.ALLOWED=2]="ALLOWED"}(u||(u={}));var w,A=(a={},(0,c.Z)(a,1,(t={},(0,c.Z)(t,f.gn.address,{type:u.AMOUNT,name:"USD Coin",version:"2"}),(0,c.Z)(t,f.h1.address,{type:u.ALLOWED,name:"Dai Stablecoin",version:"1"}),(0,c.Z)(t,v.hs[1].address,{type:u.AMOUNT,name:"SushiSwap"}),t)),(0,c.Z)(a,4,(i={},(0,c.Z)(i,"0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735",{type:u.ALLOWED,name:"Dai Stablecoin",version:"1"}),(0,c.Z)(i,v.hs[4].address,{type:u.AMOUNT,name:"SushiSwap"}),i)),(0,c.Z)(a,3,(o={},(0,c.Z)(o,v.hs[3].address,{type:u.AMOUNT,name:"SushiSwap"}),(0,c.Z)(o,"0x07865c6E87B9F70255377e024ace6630C1Eaa37F",{type:u.AMOUNT,name:"USD Coin",version:"2"}),o)),(0,c.Z)(a,5,(0,c.Z)({},v.hs[5].address,{type:u.AMOUNT,name:"SushiSwap"})),(0,c.Z)(a,42,(0,c.Z)({},v.hs[42].address,{type:u.AMOUNT,name:"SushiSwap"})),a);!function(e){e[e.NOT_APPLICABLE=0]="NOT_APPLICABLE",e[e.LOADING=1]="LOADING",e[e.NOT_SIGNED=2]="NOT_SIGNED",e[e.SIGNED=3]="SIGNED"}(w||(w={}));var S=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],D=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],k=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],E=[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}];function Z(e,n,r){var t,i,o=(0,y.aQ)(),a=o.account,c=o.chainId,d=o.library,f=(0,b.Z)(),h=null!==e&&void 0!==e&&null!==(t=e.currency)&&void 0!==t&&t.isToken?e.currency.address:void 0,Z=(0,g.N9)(h),j=(0,P.Z)(),T=(0,O.useMemo)((function(){return[null!==a&&void 0!==a?a:void 0]}),[a]),x=(0,m.Wk)(Z,"nonces",T),I=null!==r&&void 0!==r?r:c&&h?null===(i=A[c])||void 0===i?void 0:i[h]:void 0,L=(0,O.useState)(null),C=L[0],U=L[1];return(0,O.useMemo)((function(){var r,t;if(j||!e||!Z||!a||!c||!f||!d||!x.valid||!h||!n||!I)return{state:w.NOT_APPLICABLE,signatureData:null,gatherPermitSignature:null};var i=null===(r=x.result)||void 0===r||null===(t=r[0])||void 0===t?void 0:t.toNumber();if(x.loading||"number"!==typeof i)return{state:w.LOADING,signatureData:null,gatherPermitSignature:null};var o=C&&C.owner===a&&C.deadline>=f.toNumber()&&C.tokenAddress===h&&C.nonce===i&&C.spender===n&&("allowed"in C||v.QA.equal(v.QA.BigInt(C.amount),e.quotient));return{state:o?w.SIGNED:w.NOT_SIGNED,signatureData:o?C:null,gatherPermitSignature:function(){var r=(0,s.Z)(l().mark((function r(){var t,o,s,v,m,y;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=I.type===u.ALLOWED,o=f.toNumber()+1200,s=e.quotient.toString(),v=t?{holder:a,spender:n,allowed:t,nonce:i,expiry:o}:{owner:a,spender:n,value:s,nonce:i,deadline:o},m=I.version?{name:I.name,version:I.version,verifyingContract:h,chainId:c}:{name:I.name,verifyingContract:h,chainId:c},y=JSON.stringify({types:{EIP712Domain:I.version?S:D,Permit:t?E:k},domain:m,primaryType:"Permit",message:v}),r.abrupt("return",d.send("eth_signTypedData_v4",[a,y]).then(p.splitSignature).then((function(e){U(N(N({v:e.v,r:e.r,s:e.s,deadline:o},t?{allowed:t}:{amount:s}),{},{nonce:i,chainId:c,owner:a,spender:n,tokenAddress:h,permitType:I.type}))})));case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()}}),[j,e,Z,a,c,f,d,x.valid,x.result,x.loading,h,n,I,C])}var j={version:"1",name:"SushiSwap LP Token",type:u.AMOUNT};function T(e,n){return Z(e,n,j)}function x(e,n){var r=(0,g.N9)(null===e||void 0===e?void 0:e.currency.address),t=(0,m.Wk)(r,"name"),i=(0,O.useMemo)((function(){var e;return null!==t&&void 0!==t&&null!==(e=t.result)&&void 0!==e&&e.length?null===t||void 0===t?void 0:t.result[0]:void 0}),[t]);return Z(e?v.ih.fromRawAmount(e.currency,v.Bz):void 0,n,{version:"1",name:null!==i&&void 0!==i?i:"",type:u.AMOUNT})}},67993:function(e,n,r){r.d(n,{Z:function(){return u}});var t=r(2886),i=r(12614),o=r(67294),a=r(54907);function u(){var e,n,r=(0,i.aQ)().account,u=(0,a.c5)(),s=(0,o.useMemo)((function(){return[null!==r&&void 0!==r?r:void 0]}),[r]),c=(0,t.Wk)(u,"isArgentWallet",s,t.DB);return null!==(e=null===c||void 0===c||null===(n=c.result)||void 0===n?void 0:n[0])&&void 0!==e&&e}},66367:function(e,n,r){r.d(n,{Z:function(){return a}});var t=r(16339),i=r(67294),o=r(92037);function a(){var e=(0,t.C)((function(e){return e.user.userDeadline})),n=(0,o.Z)();return(0,i.useMemo)((function(){if(n&&e)return n.add(e)}),[n,e])}}}]);