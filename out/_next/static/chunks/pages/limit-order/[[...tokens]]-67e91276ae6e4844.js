(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7882,4654],{27801:function(e,r,t){"use strict";var n=t(59499),i=t(31518),a=t(31969),o=t(94633),s=(t(67294),t(17141)),c=t(41626),u=t(56785),l=t(85893);function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var m=function(e){var r=e.header,t=e.items,n=e.footer,i=e.className,o=void 0===i?"":i;return(0,l.jsxs)("div",{className:(0,a.AK)(o,"flex flex-col"),children:[r&&(0,l.jsx)("div",{className:"overflow-hidden border rounded-t border-dark-700",children:r}),t&&(0,l.jsx)("div",{className:(0,a.AK)(r?"":"border-t rounded-t",n?"bg-dark-800":"border-b rounded-b bg-dark-900","border-l border-r border-dark-700 divide-y divide-dark-700 overflow-hidden"),children:t}),n&&(0,l.jsx)("div",{className:"overflow-hidden border rounded-b bg-dark-900 border-dark-700",children:n})]})},p=function(e){var r=e.left,t=e.right,n=e.className;return(0,l.jsxs)("div",{className:(0,a.AK)(n,"flex grid items-center grid-cols-2 gap-2 px-3 py-3 lg:px-4 border-dark-700"),children:[r,t]})};m.Header=function(e){var r=e.title,t=e.value,n=e.subValue,i=e.className,o=void 0===i?"":i,s=e.id;return(0,l.jsxs)("div",{id:s,className:(0,a.AK)(o,"flex flex-row justify-between px-4 py-[10px] items-center"),children:[(0,l.jsx)(u.Z,{variant:"lg",className:"text-high-emphesis",weight:700,children:r}),(t||n)&&(0,l.jsxs)("div",{className:"flex flex-col text-right",children:[t&&(0,l.jsx)(u.Z,{className:"text-high-emphesis",weight:700,children:t}),n&&(0,l.jsx)(u.Z,{className:"text-secondary",variant:"xxs",weight:700,children:n})]})]})},p.Left=function(e){var r=e.amount,t=e.size,n=e.hideCurrencyLogo,a=e.startAdornment;return(0,l.jsxs)("div",{className:"flex flex-row gap-1.5 lg:gap-3 items-center",children:[a&&a,!n&&(0,l.jsx)(c.X,{currency:null===r||void 0===r?void 0:r.currency,size:20,className:"rounded-full"}),(0,l.jsxs)(u.Z,{variant:t||"sm",className:"text-high-emphesis",weight:700,children:[null!==r&&void 0!==r&&r.greaterThan(i.xE)?null===r||void 0===r?void 0:r.toSignificant(6):"0.00"," ",null===r||void 0===r?void 0:r.currency.symbol]})]})},p.Right=function(e){var r=e.children;return(0,l.jsx)(u.Z,{variant:"xs",weight:400,className:"text-right",children:r})},m.Item=p,m.CurrencyAmountItem=function(e){var r=e.amount,t=e.weight,n=e.displayTokenAmount,d=void 0!==n&&n,p=e.id,h=void 0===p?"":p,f=e.hideIfZero,x=void 0===f||f,g=e.hideCurrencyLogo,j=e.hideUSDC,b=void 0!==j&&j,w=e.size,y=e.className,N=(0,o.or)(b?void 0:null!==r&&void 0!==r&&r.equalTo(i.xE)?i.ih.fromRawAmount(null===r||void 0===r?void 0:r.currency,"1"):r);return d?(0,l.jsxs)("div",{id:h,className:(0,a.AK)(x&&null!==r&&void 0!==r&&r.equalTo(i.xE)?"hidden":"","flex grid items-center grid-cols-3 gap-2 px-3 py-3 lg:px-4 border-dark-700",y),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 -ml-1",children:[!g&&(0,l.jsx)(c.X,{currency:null===r||void 0===r?void 0:r.currency,size:30,className:"rounded-full"}),(0,l.jsx)(u.Z,{className:"text-high-emphesis",weight:700,variant:w||"base",children:null===r||void 0===r?void 0:r.currency.symbol})]}),(0,l.jsx)(u.Z,{className:"text-right text-high-emphesis",weight:700,children:(0,a.uf)(null===r||void 0===r?void 0:r.toSignificant(6))}),!b&&(0,l.jsx)(u.Z,{className:"text-right",variant:"sm",children:(0,a.uf)(null===N||void 0===N?void 0:N.toSignificant(6),!0,!1,6)})]}):(0,l.jsx)("div",{id:"".concat(h),className:x&&null!==r&&void 0!==r&&r.equalTo(i.xE)?"hidden":"",children:(0,l.jsx)(m.Item,{className:y,left:(0,l.jsx)(m.Item.Left,v({size:w,hideCurrencyLogo:g,amount:r},t&&{startAdornment:(0,l.jsx)(s.Z,{color:"default",label:t,size:"sm"})})),right:!b&&(0,l.jsxs)(m.Item.Right,{children:["$",N?null===N||void 0===N?void 0:N.toFixed(2):"0.00"]})},0)})},m.Footer=function(e){var r=e.title,t=e.value;return(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between px-4 py-2",children:[(0,l.jsx)(u.Z,{variant:"xs",weight:400,className:"text-high-emphesis",children:r}),t&&(0,l.jsx)(u.Z,{className:"text-high-emphesis",variant:"sm",weight:700,children:t})]})},r.Z=m},64958:function(e,r,t){"use strict";var n=t(59499),i=t(4730),a=t(41664),o=t.n(a),s=t(11163),c=t(67294),u=t(85893),l=["children","exact","activeClassName"];function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.children,t=e.exact,n=void 0!==t&&t,a=e.activeClassName,d=void 0===a?"text-high-emphesis":a,m=(0,i.Z)(e,l),p=(0,s.useRouter)(),h=p.asPath,f=(p.pathname,p.route,p.query,p.basePath,c.Children.only(r)),x=f.props.className||"",g=(n?(m.as||m.href.pathname||m.href)===h:h.startsWith(m.as||m.href.pathname||m.href))?"".concat(x," ").concat(d).trim():x;return(0,u.jsx)(o(),v(v({href:m.href},m),{},{children:c.cloneElement(f,{className:g||null})}))}},90560:function(e,r,t){"use strict";var n=t(49501),i=t(97448),a=t(71862),o=t(46430),s=t(56785),c=t(38239),u=t(25183),l=t(31969),d=t(69137),v=t(12614),m=t(49552),p=t.n(m),h=t(67294),f=t(85893);r.Z=function(){var e=(0,n.mV)().i18n,r=(0,v.aQ)().chainId,t=(0,u.Z)().pending,m=(0,d.ZP)(r?i.A2[r]:void 0,{}),x=m.approve,g=m.approvalState,j=(0,h.useState)(),b=j[0],w=j[1],y=t.totalOrders>0&&g===d.kG.NOT_APPROVED&&!p().get("disableLimitOrderGuard")&&"undefined"!==typeof b&&!b;return r&&!(0,l.vR)(c.L.LIMIT_ORDERS,r)?(0,f.jsx)(f.Fragment,{}):(0,f.jsx)(o.Z.Controlled,{isOpen:y,onDismiss:function(){return w(!0)},maxWidth:"sm",children:(0,f.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,f.jsx)(o.Z.Header,{header:e._(e._("Approve Master Contract")),onClose:function(){return w(!0)}}),(0,f.jsx)(o.Z.BorderedContent,{className:"bg-dark-1000/40",children:(0,f.jsx)(s.Z,{variant:"sm",children:e._(e._("It seems like you have open orders while the limit order master contract is not approved. Please make\nsure you approved the limit order master contract or the order will not execute"))})}),(0,f.jsxs)("div",{className:"flex justify-end gap-6",children:[(0,f.jsx)(a.ZP,{color:"blue",size:"sm",variant:"empty",onClick:function(){return p().set("disableLimitOrderGuard",!0)},children:e._(e._("Do not show again"))}),(0,f.jsx)(a.ZP,{loading:g===d.kG.PENDING,color:"blue",size:"sm",onClick:x,children:e._(e._("Approve"))})]})]})})}},87433:function(e,r,t){"use strict";var n=t(16835),i=t(49501),a=t(31518),o=t(46430),s=t(64958),c=t(56785),u=t(87269),l=t(10552),d=t(90662),v=t(12614),m=t(49552),p=t.n(m),h=t(25675),f=t.n(h),x=t(67294),g=t(85893),j=function(e){var r,t=e.children,m=e.feature,h=e.asModal,j=void 0===h||h,b=(0,i.mV)().i18n,w=(0,v.aQ)(),y=w.chainId,N=w.library,Z=w.account,O=(0,g.jsx)(s.Z,{href:"/swap",children:(0,g.jsx)("a",{className:"text-blue focus:outline-none",children:b._(b._("home page"))})}),_=Object.entries(u.Z).reduce((function(e,r){var t=(0,n.Z)(r,2),i=t[0];return t[1].includes(m)&&e.push(i),e}),[]),k=(0,g.jsx)("div",{className:"flex justify-center lg:mt-[200px]",children:(0,g.jsxs)("div",{className:"flex flex-col gap-5 justify-center p-4 mt-10 lg:mt-0",children:[(0,g.jsx)(c.Z,{variant:"h1",className:"max-w-2xl text-white text-center",weight:700,children:b._(b._("This feature is not yet supported on the {0} network",{0:l.z[y]}))}),(0,g.jsxs)(c.Z,{className:"text-center max-w-[248px] mx-auto",children:[(0,g.jsx)(i.cC,{id:"Either return to the {link}",values:{link:O},components:x.Fragment})," ",b._(b._("or change to an available network"))]}),(0,g.jsx)(c.Z,{variant:"sm",className:"uppercase text-center tracking-[.2rem] mt-10 mb-5",weight:700,children:b._(b._("Available Networks"))}),(0,g.jsx)("div",{className:"grid grid-cols-[repeat(2,_100px)] md:grid-cols-[repeat(4,_100px)] gap-y-10 justify-center",children:_.map((function(e,r){return(0,g.jsxs)("button",{className:"text-primary hover:text-white flex items-center flex-col gap-2 justify-center",onClick:function(){var r=d.b[e];p().set("chainId",e),e===a.a_.ETHEREUM.toString()?null===N||void 0===N||N.send("wallet_switchEthereumChain",[{chainId:"0x1"},Z]):e===a.a_.KOVAN.toString()?null===N||void 0===N||N.send("wallet_switchEthereumChain",[{chainId:"0x2A"},Z]):null===N||void 0===N||N.send("wallet_addEthereumChain",[r,Z])},children:[(0,g.jsx)("div",{className:"w-[40px] h-[40px]",children:(0,g.jsx)(f(),{src:l.w[e],alt:"Switch Network",className:"rounded-md filter drop-shadow-currencyLogo",width:"40px",height:"40px"})}),(0,g.jsx)(c.Z,{variant:"sm",weight:700,className:"text-white",children:l.z[e]})]},r)}))})]})});return j?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Z.Controlled,{isOpen:!!Z&&!(null!==(r=u.Z[y])&&void 0!==r&&r.includes(m)),onDismiss:function(){return null},transparent:!0,children:k}),t]}):Z&&!u.Z[y].includes(m)?k:(0,g.jsx)(g.Fragment,{children:t})};r.Z=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r?function(r){var t=r.children;return(0,g.jsx)(j,{feature:e,children:t})}:function(r){var t=r.children;return(0,g.jsx)(j,{feature:e,asModal:!1,children:t})}}},46472:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(84853),i=t(30526),a=t(29325);function o(e){var r=(0,n.UJ)(e),t=(0,a.Z)(r||void 0),o=(0,i.Z)(e);return{loading:t.loading||o.loading,address:r||o.address,name:t.ENSName?t.ENSName:!r&&o.address&&e||null}}},30526:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var n=t(84706),i=t(2886),a=t(67294),o=t(31969),s=t(54907),c=t(96107);function u(e){var r,t,u,l=(0,c.Z)(e,200),d=(0,a.useMemo)((function(){if(!l)return[void 0];try{return l?[(0,n.VM)(l)]:[void 0]}catch(e){return[void 0]}}),[l]),v=(0,s.zb)(!1),m=(0,i.Wk)(v,"resolver",d),p=null===(r=m.result)||void 0===r?void 0:r[0],h=(0,s.uU)(p&&!(0,o.Fr)(p)?p:void 0,!1),f=(0,i.Wk)(h,"addr",d),x=l!==e;return{address:x?null:null!==(t=null===(u=f.result)||void 0===u?void 0:u[0])&&void 0!==t?t:null,loading:x||m.loading||f.loading}}},9557:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(80129),i=t(67294);function a(){var e=location.search;return(0,i.useMemo)((function(){return e&&e.length>1?(0,n.parse)(e,{parseArrays:!1,ignoreQueryPrefix:!0}):{}}),[e])}},94633:function(e,r,t){"use strict";t.d(r,{Gj:function(){return l},SA:function(){return s},ZP:function(){return c},or:function(){return u}});var n=t(31518),i=t(84329),a=t(12614),o=t(67294);function s(e){var r=(0,a.aQ)(),t=r.chainId,s=t&&n.qY[t]?n.ih.fromRawAmount(n.qY[t],0).currency:void 0,c=(0,i.k$)({chainId:t}),u=c.data,l=(0,i.rU)({chainId:t,variables:{where:{id_in:null===e||void 0===e?void 0:e.map((function(e){return e.wrapped.address.toLowerCase()}))}},shouldFetch:e&&(null===e||void 0===e?void 0:e.length)>0}),d=(0,i.EO)({chainId:t,variables:{where:{id_in:null===e||void 0===e?void 0:e.map((function(e){return e.wrapped.address.toLowerCase()}))}},shouldFetch:e&&(null===e||void 0===e?void 0:e.length)>0}),v=d.data;return(0,o.useMemo)((function(){if(e&&0!==e.length&&s&&(l||v)){var r={};return e.map((function(e){var t=void 0,i=null===l||void 0===l?void 0:l.find((function(r){return r.id===e.wrapped.address.toLowerCase()})),a=null===v||void 0===v?void 0:v.find((function(r){return r.id===e.wrapped.address.toLowerCase()}));if(null!==e&&void 0!==e&&e.wrapped.equals(s))r[e.wrapped.address]=new n.tA(s,s,"1","1");else if(i&&a?t=i.liquidity>a.kpi.liquidity?u*i.derivedETH:a.price.derivedUSD:u&&i?t=u*i.derivedETH:a&&(t=a.price.derivedUSD),void 0!==t&&0!==t){var o,c,d,m=Math.pow(10,null!==(o=null===(c=String(t).split("."))||void 0===c||null===(d=c[1])||void 0===d?void 0:d.length)&&void 0!==o?o:0),p=Math.floor(t*m);try{r[e.wrapped.address]=new n.tA(e,s,m*Math.pow(10,e.decimals)/Math.pow(10,s.decimals),p)}catch(h){}}})),r}}),[e,s,l,v,u])}function c(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=s(e?[e]:void 0,r);return t?Object.values(t)[0]:void 0}function u(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=c(null===e||void 0===e?void 0:e.currency,r);return(0,o.useMemo)((function(){if(!t||!e)return null;try{return t.quote(e)}catch(r){return null}}),[e,t])}function l(e){var r=c(null===e||void 0===e?void 0:e.currency);return(0,o.useMemo)((function(){if(!r||!e)return{value:void 0,loading:!1};try{return{value:r.quote(e),loading:!1}}catch(t){return{value:void 0,loading:!1}}}),[e,r])}},80759:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return pe}});var n=t(59499),i=t(16835),a=t(67484),o=t(49501),s=t(31518),c=t(99140),u=t(15205),l=t(56785),d=t(38239),v=t(90560),m=t(50029),p=t(87794),h=t.n(p),f=t(97448),x=t(71862),g=t(25183),j=t(31969),b=t(53389),w=t(61647),y=t(12614),N=t(90849),Z=t(16339),O=t(60118),_=t(8694),k=t(62483),P=t(15423),C=t(46472),A=(t(9557),t(56388)),S=t(627),T=t(67294),E=t(25617),I=t(73165);function M(){return(0,E.v9)(I.SX)}var D=function(){var e,r,t=(0,y.aQ)().chainId,n=M(),i=n.inputCurrencyId,a=n.outputCurrencyId,o=null!==(e=(0,k.U8)("SUSHI"===i?s.He[t||1]:i))&&void 0!==e?e:void 0,c=null!==(r=(0,k.U8)("SUSHI"===a?s.He[t||1]:a))&&void 0!==r?r:void 0;return(0,T.useMemo)((function(){return{inputCurrency:o,outputCurrency:c}}),[o,c])},R=function(){var e=M(),r=e.limitPrice,t=e.invertRate,n=D(),i=n.inputCurrency,a=n.outputCurrency;return(0,T.useMemo)((function(){var e=(0,j.eo)(t?r:"1",i),n=(0,j.eo)(t?"1":r,a);return e&&n&&i&&a?new s.tA({baseAmount:e,quoteAmount:n}):void 0}),[i,t,r,a])},U=function(){var e=M().typedField,r=D(),t=r.inputCurrency,n=r.outputCurrency,a=function(){var e=D(),r=e.inputCurrency,t=e.outputCurrency,n=M(),i=n.typedField,a=n.typedValue;return(0,T.useMemo)((function(){var e,n=i===O.gN.INPUT;return(0,j.eo)(a,null!==(e=n?r:t)&&void 0!==e?e:void 0)}),[r,t,i,a])}(),o=(0,S.RO)(),c=(0,i.Z)(o,1)[0],u=e===O.gN.INPUT,l=t?a||s.ih.fromRawAmount(t,s.QA.exponentiate(s.QA.BigInt(10),s.QA.BigInt(t.decimals))):void 0,d=(0,A.w)(u?l:void 0,null!==n&&void 0!==n?n:void 0,{maxHops:c?1:void 0}),v=(0,A.k)(null!==t&&void 0!==t?t:void 0,u?void 0:l,{maxHops:c?1:void 0});return(0,T.useMemo)((function(){var e;return null!==(e=u?d:v)&&void 0!==e?e:void 0}),[d,v,u])},B=D,F=t(68411),L=t(2593),H=function(e){switch(e){case I.FJ.hour:return Math.floor((new Date).getTime()/1e3)+3600;case I.FJ.day:return Math.floor((new Date).getTime()/1e3)+86400;case I.FJ.week:return Math.floor((new Date).getTime()/1e3)+604800;case I.FJ.never:default:return Number.MAX_SAFE_INTEGER}},q=function(){var e=(0,y.aQ)(),r=e.account,t=e.chainId,n=e.library,i=D().inputCurrency,a=(0,w.C)(i).rebase,o=(0,Z.T)(),s=(0,b.rO)(),c=(0,b.wq)(),u=(0,F.h7)(),l=t?f.A2[t]:void 0,d=(0,N.i$)(),v=(0,g.Z)().mutate,p=(0,b.x7)(l).deposit,x=(0,T.useCallback)(function(){var e=(0,m.Z)(h().mark((function e(t){var n,i,a,s,d,v,m,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.inputAmount,i=t.bentoPermit,a=i.v,s=i.r,d=i.s,v=n.quotient.toString(),e.prev=3,e.next=6,null===c||void 0===c?void 0:c.estimateGas.depositAndApprove(r,l,!0,a,s,d,{value:v});case 6:if(!(m=e.sent)){e.next=18;break}return o((0,O.fM)(!0)),e.next=11,null===c||void 0===c?void 0:c.depositAndApprove(r,l,!0,a,s,d,{value:v,gasLimit:(0,j.Wt)(m)});case 11:return p=e.sent,e.next=14,p.wait();case 14:return u(p,{summary:"Approve limit orders and Deposit ".concat(n.currency.symbol," into BentoBox")}),o((0,O.fM)(!1)),o((0,O.Oi)(void 0)),e.abrupt("return",p);case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),o((0,O.fM)(!1)),console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(r){return e.apply(this,arguments)}}(),[r,u,o,l,c]),_=(0,T.useCallback)(function(){var e=(0,m.Z)(h().mark((function e(r){var t,n,i,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.inputAmount,n=r.bentoPermit,i=r.fromBentoBalance,s&&l&&t){e.next=3;break}throw new Error("Dependencies unavailable");case 3:if(c=L.O$.from(t.quotient.toString()),!t.currency.isNative||!n){e.next=6;break}return e.abrupt("return",x({inputAmount:t,bentoPermit:n}));case 6:if(i){e.next=23;break}if(e.prev=7,a){e.next=11;break}return console.error("Dependencies unavailable"),e.abrupt("return");case 11:return o((0,O.fM)(!0)),e.next=14,p(t.currency,a,c,n);case 14:return u=e.sent,o((0,O.fM)(!1)),o((0,O.Oi)(void 0)),e.abrupt("return",u);case 20:e.prev=20,e.t0=e.catch(7),o((0,O.fM)(!1));case 23:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(r){return e.apply(this,arguments)}}(),[p,s,x,o,l,a]),k=(0,T.useCallback)(function(){var e=(0,m.Z)(h().mark((function e(i){var a,s,c,u,l,m,p,x;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.orderExpiration,s=i.inputAmount,c=i.outputAmount,u=i.recipient,s&&c&&r&&n){e.next=3;break}throw new Error("Dependencies unavailable");case 3:return l=H(a),m=new f.eN(r,s.wrapped,c.wrapped,u||r,Math.floor((new Date).getTime()/1e3).toString(),l.toString()),e.prev=5,o((0,O.fM)(!0)),e.next=9,null===m||void 0===m?void 0:m.signOrderWithProvider(t||1,n);case 9:return e.next=11,null===m||void 0===m?void 0:m.send();case 11:if(!e.sent.success){e.next=17;break}return d({txn:{hash:"",summary:"Limit order created",success:!0}}),e.next=16,v();case 16:o((0,O.ZH)());case 17:o((0,O.fM)(!1)),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(5),o((0,O.fM)(!1)),d({txn:{hash:"",summary:"Error: ".concat(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p||null===(x=p.data)||void 0===x?void 0:x.data),success:!1}});case 24:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(r){return e.apply(this,arguments)}}(),[r,d,t,o,n,v]);return{deposit:_,execute:k}},V=t(49932),z=t(85893);function G(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function J(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?G(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Q=function(e){var r=e.trade,t=e.parsedAmounts,n=(0,o.mV)().i18n,a=(0,y.aQ)().chainId,c=(0,Z.T)(),u=M(),d=u.fromBentoBalance,v=u.bentoPermit,p=u.attemptingTxn,g=u.recipient,w=(0,C.Z)(g).address,N=function(e){var r=e.trade,t=M(),n=t.recipient,a=t.orderExpiration,o=t.fromBentoBalance,c=t.limitPrice,u=t.typedValue,l=(0,y.aQ)().account,d=D(),v=d.inputCurrency,m=d.outputCurrency,p=(0,C.Z)(n),h=n?p.address:l,f=R(),x=(0,P.C)(null!==l&&void 0!==l?l:void 0,v,!o),g=(0,S.DG)(),b=(0,i.Z)(g,1)[0];return(0,T.useMemo)((function(){return l?null!==r&&void 0!==r&&r.inputAmount.greaterThan(s.xE)&&u?v&&m?h&&(0,j.UJ)(h)?c!==O.gx.CURRENT&&null!==f&&void 0!==f&&f.equalTo(s.xE)?_.ag._(_.ag._("Select a rate")):a?x?!b&&x&&null!==r&&void 0!==r&&r.inputAmount&&x.lessThan(r.inputAmount)?_.ag._(_.ag._("Insufficient Balance")):"":_.ag._(_.ag._("Loading balance")):_.ag._(_.ag._("Select an order expiration")):_.ag._(_.ag._("Enter a valid recipient address")):_.ag._(_.ag._("Select a token")):_.ag._(_.ag._("Enter an amount")):"Connect Wallet"}),[l,x,b,v,c,a,m,f,h,null===r||void 0===r?void 0:r.inputAmount,u])}({trade:r}),k=q().deposit,A=(0,b.rO)(),E=a?f.A2[a]:void 0,I=(0,T.useState)(!1),U=I[0],B=I[1],F=(0,T.useCallback)(function(){var e=(0,m.Z)(h().mark((function e(r){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(r);case 2:null!==(t=e.sent)&&void 0!==t&&t.hash&&c((0,O.vV)(!0));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[k,c]),L=(0,T.useCallback)((0,m.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.inputAmount){e.next=2;break}return e.abrupt("return");case 2:if(!d){e.next=6;break}c((0,O.nO)(!0)),e.next=8;break;case 6:return e.next=8,F({inputAmount:null===t||void 0===t?void 0:t.inputAmount,bentoPermit:v,fromBentoBalance:d});case 8:case"end":return e.stop()}}),e)}))),[F,v,c,d,null===t||void 0===t?void 0:t.inputAmount]);return(0,z.jsxs)(z.Fragment,{children:[U&&(0,z.jsx)(l.Z,{variant:"sm",className:"p-4 text-center border rounded border-yellow/40 text-yellow",children:n._(n._("Something went wrong during signing of the approval. This is expected for hardware wallets, such as Trezor and Ledger. Click 'Approve BentoBox' again for approving using the fallback method"))}),(0,z.jsx)(V.Z,J(J({inputAmounts:[null===r||void 0===r?void 0:r.inputAmount],tokenApproveOn:null===A||void 0===A?void 0:A.address,masterContractAddress:E},d?{withPermit:!1}:{withPermit:!0,permit:v,onPermit:function(e){return c((0,O.Oi)(e))},onPermitError:function(){return B(!0)}}),{},{children:function(e){var r=e.approved,t=e.loading,i=!!N||!r||t||p||Boolean(g&&!w&&N);return(0,z.jsx)(x.ZP,{loading:t||p,color:"gradient",disabled:i,onClick:L,className:"rounded-2xl md:rounded",children:N||(d?n._(n._("Review Limit Order")):n._(n._("Confirm Deposit")))})}}))]})},W=t(52358),K=t(27801),X=t(70028),Y=t(15503),$=function(e){var r=e.parsedAmounts,t=e.trade,n=e.limitPrice,i=(0,T.useState)(!1),a=i[0],c=i[1],u=M(),d=u.showReview,v=u.orderExpiration,m=u.recipient,p=u.attemptingTxn,h=(0,Z.T)(),f=(0,o.mV)().i18n,g=q().execute,b=(0,T.useCallback)((function(){null!==r&&void 0!==r&&r.inputAmount&&null!==r&&void 0!==r&&r.outputAmount&&g({orderExpiration:v.value,recipient:m,outputAmount:r.outputAmount,inputAmount:r.inputAmount})}),[g,v.value,r.inputAmount,r.outputAmount,m]),w=(0,T.useMemo)((function(){if(n&&t){var e=n.subtract(t.executionPrice).divide(t.executionPrice),r=e.numerator,i=e.denominator;return new s.gG(r,i)}}),[n,t]);return(0,z.jsx)(X.S.Controlled,{isOpen:d,onDismiss:function(){return h((0,O.nO)(!1))},maxWidth:"sm",children:(0,z.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,z.jsx)(X.S.Header,{header:f._(f._("Confirm order")),onClose:function(){return h((0,O.nO)(!1))}}),(0,z.jsxs)(X.S.BorderedContent,{className:"flex flex-col gap-2 bg-dark-1000/40",children:[(0,z.jsx)(l.Z,{weight:700,variant:"sm",className:"text-secondary",children:f._(f._("You'll pay"))}),(0,z.jsx)(K.Z,{items:[(0,z.jsx)(K.Z.CurrencyAmountItem,{amount:null===r||void 0===r?void 0:r.inputAmount},0)]}),(0,z.jsx)("div",{className:"flex justify-center mt-2 -mb-2",children:(0,z.jsx)(W.Z,{width:14,className:"text-secondary"})}),(0,z.jsx)(l.Z,{weight:700,variant:"sm",className:"justify-end text-secondary",children:f._(f._("You'll receive"))}),(0,z.jsx)(K.Z,{items:[(0,z.jsx)(K.Z.CurrencyAmountItem,{amount:null===r||void 0===r?void 0:r.outputAmount},0)]})]}),(0,z.jsxs)(X.S.BorderedContent,{className:"flex flex-col gap-1 !py-1 bg-dark-1000/40 divide-y divide-dark-900",children:[m&&(0,z.jsxs)("div",{className:"flex justify-between py-2",children:[(0,z.jsx)(l.Z,{variant:"sm",weight:700,children:f._(f._("Recipient"))}),(0,z.jsx)(l.Z,{variant:"sm",weight:700,children:(0,j.UJ)(m)&&(0,j.Xn)(m)})]}),(0,z.jsxs)("div",{className:"flex justify-between py-2",children:[(0,z.jsx)(l.Z,{variant:"sm",weight:700,children:f._(f._("Expiration"))}),(0,z.jsx)(l.Z,{variant:"sm",weight:700,children:v.label})]}),(0,z.jsxs)("div",{className:"flex flex-col gap-1 py-2",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)(l.Z,{variant:"sm",weight:700,children:f._(f._("Rate"))}),(0,z.jsx)(Y.Z,{price:n,showInverted:a,setShowInverted:c,className:"justify-end text-primary"})]}),w&&(0,z.jsx)("div",{className:"flex justify-end",children:(0,z.jsxs)(l.Z,{variant:"xs",weight:700,className:null!==w&&void 0!==w&&w.greaterThan(s.xE)?"text-green":"text-red",children:[w.toSignificant(2),"% ",null!==w&&void 0!==w&&w.greaterThan(s.xE)?"above":"below"," market rate"]})})]})]}),(0,z.jsx)(l.Z,{variant:"xs",className:"text-center text-secondary",children:f._(f._("Please note that after order execution, your tokens will be received in your BentoBox"))}),(0,z.jsx)(x.ZP,{loading:p,color:"gradient",disabled:p,onClick:b,children:f._(f._("Create Limit Order"))})]})})},ee=t(39281),re=function(e){var r=e.trade,t=e.limitPrice,n=(0,o.mV)().i18n,i=(0,Z.T)(),a=M(),s=a.limitPrice,c=a.invertRate,u=B(),d=u.inputCurrency,v=u.outputCurrency,m=!d||!v;return(0,z.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,z.jsx)(l.Z,{variant:"sm",className:"px-2",children:n._(n._("Rate"))}),(0,z.jsxs)("div",{className:"flex justify-between items-baseline bg-dark-900 rounded px-4 py-1.5 border border-dark-700 hover:border-dark-600",children:[(0,z.jsx)(l.Z,{weight:700,variant:"lg",className:"relative flex items-baseline flex-grow gap-3 overflow-hidden",children:(0,z.jsx)(ee.Z.Numeric,{disabled:m,className:"leading-[32px] focus:placeholder:text-low-emphesis flex-grow w-full text-left bg-transparent text-inherit disabled:cursor-not-allowed",placeholder:r?r.executionPrice.toSignificant(6):"0.0",id:"limit-price-input",value:(s===O.gx.CURRENT?null===r||void 0===r?void 0:r.executionPrice.toSignificant(6):s)||"",onUserInput:function(e){return i((0,O.GJ)(e))}})}),(0,z.jsx)(l.Z,{variant:"sm",onClick:function(){return i((0,O.We)({invertRate:!c,limitPrice:t?c?null===t||void 0===t?void 0:t.toSignificant(6):null===t||void 0===t?void 0:t.invert().toSignificant(6):""}))},children:c?null===d||void 0===d?void 0:d.symbol:null===v||void 0===v?void 0:v.symbol})]})]})},te=t(56727),ne=t(13342),ie=t(54962),ae=function(){var e=(0,o.mV)().i18n,r=(0,Z.T)(),t=M().orderExpiration,a=(0,T.useMemo)((function(){var r;return r={},(0,n.Z)(r,I.FJ.never,e._(e._("Never"))),(0,n.Z)(r,I.FJ.hour,e._(e._("1 Hour"))),(0,n.Z)(r,I.FJ.day,e._(e._("24 Hours"))),(0,n.Z)(r,I.FJ.week,e._(e._("1 Week"))),(0,n.Z)(r,I.FJ.month,e._(e._("30 Days"))),r}),[e]),s=(0,T.useCallback)((function(e,t){r((0,O.tn)({label:a[t],value:t}))}),[r,a]);return(0,z.jsxs)("div",{className:"flex flex-col flex-grow gap-1",children:[(0,z.jsxs)(l.Z,{variant:"sm",className:"flex items-center px-2",children:[e._(e._("Expires in")),(0,z.jsx)(ie.Z,{text:e._(e._("Expiration is the time at which the order will become invalid"))})]}),(0,z.jsx)("div",{className:"flex items-center justify-between h-full px-4 py-2 border rounded bg-dark-900 border-dark-700 hover:border-dark-600",children:(0,z.jsxs)(te.v2,{as:"div",className:"relative inline-block w-full text-left",children:[(0,z.jsx)(te.v2.Button,{className:"w-full",children:(0,z.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,z.jsx)(l.Z,{weight:700,variant:"sm",children:t.label}),(0,z.jsx)(ne.Z,{className:"w-5 h-5 ml-2 -mr-1","aria-hidden":"true"})]})}),(0,z.jsx)(te.uT,{as:T.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,z.jsx)(te.v2.Items,{static:!0,className:"absolute z-10 w-full mt-2 overflow-auto border rounded shadow-lg bg-dark-900 border-dark-700 hover:border-dark-600",children:Object.entries(a).map((function(e){var r=(0,i.Z)(e,2),t=r[0],n=r[1];return(0,z.jsx)(te.v2.Item,{onClick:function(e){return s(e,t)},children:function(e){var r=e.active;return(0,z.jsx)(l.Z,{variant:"sm",weight:700,className:(0,j.AK)(r?"text-white":"text-primary","px-3 py-2 cursor-pointer hover:bg-dark-900/40"),children:n})}},t)}))})})]})})]})},oe=t(59497),se=t(92088),ce=t(87433),ue=t(73179),le=t(2962);function de(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ve(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?de(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):de(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var me=function(){var e,r,t=(0,o.mV)().i18n,n=(0,Z.T)(),m=(0,y.aQ)().chainId,p=(0,S.DG)(),h=(0,i.Z)(p,1)[0],f=M(),x=f.typedField,g=f.typedValue,b=f.fromBentoBalance,w=f.recipient,N=B(),_=N.inputCurrency,k=N.outputCurrency,P=U(),C=R(),A=function(e){var r=e.rate,t=e.trade,n=D(),i=n.inputCurrency,a=n.outputCurrency,o=M(),s=o.typedField,c=o.typedValue;return(0,T.useMemo)((function(){var e=r||(null===t||void 0===t?void 0:t.executionPrice),n=s===O.gN.INPUT,o=n?i:a,u=(0,j.eo)(c,null!==o&&void 0!==o?o:void 0),l=i&&a&&e&&u?n?e.quote(u):e.invert().quote(u):void 0;return{inputAmount:n?u:l,outputAmount:n?l:u}}),[i,a,r,null===t||void 0===t?void 0:t.executionPrice,s,c])}({rate:C,trade:P}),E=function(){var e=(0,Z.T)(),r=(0,T.useCallback)((function(r,t){e((0,O.j)({field:r,currencyId:t.isToken?t.address:t.isNative?"ETH":""}))}),[e]),t=(0,T.useCallback)((function(){e((0,O.KS)())}),[e]),n=(0,T.useCallback)((function(r,t){e((0,O.LC)({field:r,typedValue:t}))}),[e]),i=(0,T.useCallback)((function(r){e((0,O.He)(r))}),[e]);return(0,T.useMemo)((function(){return{onSwitchTokens:t,onCurrencySelection:r,onUserInput:n,onChangeRecipient:i}}),[i,r,t,n])}(),I=E.onSwitchTokens,F=E.onCurrencySelection,L=E.onUserInput,H=(0,T.useMemo)((function(){return(c.X[m||1]||[]).map((function(e){var r=(0,i.Z)(e,2),t=r[0],n=r[1];return[t.address,n.address]}))}),[m]),q=(0,T.useMemo)((function(){if(C&&P){var e=C.subtract(P.executionPrice).divide(P.executionPrice).multiply(-1),r=e.numerator,t=e.denominator;return new s.gG(r,t)}}),[C,P]),V=(0,T.useMemo)((function(){return 0===H.length?[]:H.reduce((function(e,r){var t=(0,i.Z)(r,2),n=t[0],a=t[1];return e.push(n),e.push(a),e}),[])}),[H]),G=(0,T.useMemo)((function(){return 0===H.length?[]:_?H.reduce((function(e,r){var t=(0,i.Z)(r,2),n=t[0],a=t[1];return _.wrapped.address===n&&e.push(a),_.wrapped.address===a&&e.push(n),e}),[]):H.reduce((function(e,r){var t=(0,i.Z)(r,2),n=t[0],a=t[1];return e.push(n),e.push(a),e}),[])}),[_,H]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(le.PB,{title:"Limit Order"}),(0,z.jsxs)(ue.yz,{children:[(0,z.jsx)(v.Z,{}),(0,z.jsx)("div",{className:"px-2",children:m&&(0,z.jsx)(oe.Z,{inputCurrency:_,outputCurrency:k,trident:(0,j.vR)(d.L.TRIDENT,m)})}),(0,z.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,z.jsx)(se.Z,{error:!1,header:se.Z.Header,walletToggle:function(e){return(0,z.jsx)(se.Z.Switch,ve(ve({id:"switch-classic-withdraw-from-0}"},e),{},{label:t._(t._("Pay from")),onChange:function(){return n((0,O.vV)(!b))}}))},selected:!0,spendFromWallet:!b,currency:_,value:(x===O.gN.INPUT?g:null===A||void 0===A||null===(e=A.inputAmount)||void 0===e?void 0:e.toSignificant(6))||"",onChange:function(e){return L(O.gN.INPUT,e||"")},onSelect:function(e){return F(O.gN.INPUT,e)},currencies:V}),(0,z.jsxs)("div",{className:"flex gap-3",children:[(0,z.jsx)("div",{className:"flex flex-1",children:(0,z.jsx)(re,{trade:P,limitPrice:C||(null===P||void 0===P?void 0:P.executionPrice)})}),(0,z.jsx)(a.Z,{width:18,className:"mt-6 cursor-pointer text-secondary hover:text-white",onClick:I}),(0,z.jsx)("div",{className:"flex flex-1",children:(0,z.jsx)(ae,{})})]}),(0,z.jsx)(se.Z,{error:!1,header:se.Z.Header,selected:!0,currency:k,value:(x===O.gN.OUTPUT?g:null===A||void 0===A||null===(r=A.outputAmount)||void 0===r?void 0:r.toSignificant(6))||"",onChange:function(e){return L(O.gN.OUTPUT,e||"")},onSelect:function(e){return F(O.gN.OUTPUT,e)},currencies:G,priceImpact:q,priceImpactCss:null!==q&&void 0!==q&&q.greaterThan(s.xE)?"text-green":"text-red"})]}),h&&(0,z.jsx)(u.Z,{recipient:w,action:O.He}),(0,z.jsx)(Q,{trade:P,parsedAmounts:A}),(0,z.jsx)($,{parsedAmounts:A,trade:P,limitPrice:C||(null===P||void 0===P?void 0:P.executionPrice)})]}),(0,z.jsx)(l.Z,{variant:"xs",className:"px-10 mt-5 text-center text-low-emphesis",children:t._(t._("Limit orders use funds from BentoBox, to create a limit order depositing into BentoBox is required."))}),(0,z.jsxs)(l.Z,{variant:"xs",className:"px-10 mt-5 text-center text-low-emphesis",children:[(0,z.jsx)(l.Z,{variant:"xs",weight:700,component:"span",children:"Tip"}),":"," ",t._(t._("When expert mode is enabled, balance isn't checked when creating orders. You can use this to chain limit\norders."))]})]})};me.Guard=(0,ce.Z)(d.L.LIMIT_ORDERS),me.Layout=(0,ue.Pf)("limit-order-page");var pe=me},29343:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/limit-order/[[...tokens]]",function(){return t(80759)}])},24654:function(){}},function(e){e.O(0,[8306,8529,8897,2749,2407,129,6975,7230,7032,3389,9658,9469,6688,210,7030,9774,2888,179],(function(){return r=29343,e(e.s=r);var r}));var r=e.O();_N_E=r}]);