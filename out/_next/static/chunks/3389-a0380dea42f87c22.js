"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3389],{53389:function(e,n,r){r.d(n,{UK:function(){return t.UK},qL:function(){return t.qL},x7:function(){return F},rO:function(){return C.rO},HW:function(){return C.HW},mX:function(){return C.mX},cq:function(){return C.cq},MQ:function(){return C.MQ},TK:function(){return D.Z},JY:function(){return C.JY},wq:function(){return C.wq},ou:function(){return C.ou},JE:function(){return C.JE},Fe:function(){return C.Fe},Ti:function(){return C.Ti},cX:function(){return Q.Z},i7:function(){return C.i7},bL:function(){return C.bL},sL:function(){return C.sL},oF:function(){return T.ZP},lz:function(){return C.lz}});var t=r(27262),a=r(19485),o=r(9279),u=r(31518),c=r(2593),i=function(e){var n=e.bentobox,r=e.tokenAddress,t=e.share,i=e.amount,s=e.account,d=e.chainId,f=(0,a.getAddress)(r);return f===u.df[d]?{data:n.interface.encodeFunctionData("deposit",[o.d,s,s,0,t]),value:i}:{data:n.interface.encodeFunctionData("deposit",[f,s,s,0,t]),value:c.O$.from(0)}},s=function(e){var n=e.bentobox,r=e.tokenAddress,t=e.amount,c=e.account,i=e.chainId,s=e.share,d=(0,a.getAddress)(r);return{data:n.interface.encodeFunctionData("withdraw",[d===u.df[i]?o.d:d,c,c,t,s?s.toString():0])}},d=function(e){var n=e.bentobox,r=e.tokenAddress,t=e.rebalance;return{data:n.interface.encodeFunctionData("harvest",[r,t,0])}},f=function(e){var n=e.bentobox,r=e.tokenAddress,t=e.fromAddress,a=e.toAddress,o=e.share;return{data:n.interface.encodeFunctionData("transfer",[r,t,a,o])}},b=function(e){var n=e.bentobox,r=e.actions,t=void 0===r?[]:r,a=e.revertOnFail,o=t.filter(Boolean);if(0===o.length)throw new Error("No valid actions");return 1===o.length?o[0]:o.length>1?n.interface.encodeFunctionData("batch",[o,a]):void 0},l=function(e){var n=e.bentobox,r=e.account,t=e.masterContract,a=e.permit,o=a.v,u=a.r,c=a.s;return{data:n.interface.encodeFunctionData("setMasterContractApproval",[r,t,!0,o,u,c])}},p=r(59499),h=r(50029),v=r(87794),g=r.n(v),x=r(69807),m=r(46440),k=r(31969),w=r(12614),O=r(68411),y=r(67294);function A(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Z(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?A(Object(r),!0).forEach((function(n){(0,p.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var F=function(e){var n=(0,w.aQ)(),r=n.account,t=n.chainId,a=n.library,o=(0,O.h7)(),p=(0,C.rO)(!0),v=(0,y.useCallback)(function(){var e=(0,h.Z)(g().mark((function e(n,u,c){var i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r&&p&&a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,a.getSigner().sendTransaction({from:r,to:p.address,data:b({bentobox:p,actions:[s({bentobox:p,tokenAddress:n,account:r,amount:u,chainId:t}).data,d({bentobox:p,tokenAddress:n,rebalance:!0}).data,s({bentobox:p,tokenAddress:n,account:r,amount:c.sub(u),chainId:t}).data],revertOnFail:!1})});case 5:if(null===(i=e.sent)||void 0===i||!i.hash){e.next=8;break}return e.abrupt("return",o(i,{summary:"Withdraw from Bentobox"}));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),console.error("Bentobox withdraw error:",e.t0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n,r,t){return e.apply(this,arguments)}}(),[r,o,p,t,a]),A=(0,y.useCallback)(function(){var n=(0,h.Z)(g().mark((function n(s,d,h,v){var m,k,w,O,y,A,Z,F;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h&&t&&r&&p&&a){n.next=2;break}return n.abrupt("return");case 2:return m=[],k="",n.prev=4,n.next=7,p.balanceOf(s.wrapped.address,"0x000000000000000000000000000000000000dead");case 7:return w=n.sent,O=(u.QA.equal(u.QA.BigInt(0),d.base)&&u.QA.equal(u.QA.BigInt(0),d.elastic)?h:c.O$.from((0,x.T)(d,u.QA.BigInt(h)).toString())).sub(w.isZero()?1e3:0),v&&e&&(m.push(l({bentobox:p,masterContract:e,permit:v,account:r}).data),k+="Approve Master Contract and"),y=i({bentobox:p,tokenAddress:s.wrapped.address,account:r,amount:h,share:O,chainId:t}),A=y.data,Z=y.value,m.push(A),k+="Deposit to Bentobox",w.isZero()&&m.push(f({bentobox:p,fromAddress:r,tokenAddress:s.wrapped.address,toAddress:"0x000000000000000000000000000000000000dead",share:c.O$.from(1)}).data),n.next=16,a.getSigner().sendTransaction({from:r,to:p.address,data:b({bentobox:p,actions:m,revertOnFail:!0}),value:Z});case 16:if(null===(F=n.sent)||void 0===F||!F.hash){n.next=21;break}return o(F,{summary:k}),n.next=21,F.wait();case 21:return n.abrupt("return",F);case 24:return n.prev=24,n.t0=n.catch(4),console.error("Bentobox deposit error:",n.t0),n.abrupt("return",n.t0);case 28:case"end":return n.stop()}}),n,null,[[4,24]])})));return function(e,r,t,a){return n.apply(this,arguments)}}(),[r,o,p,t,a,e]),F=(0,y.useCallback)(function(){var e=(0,h.Z)(g().mark((function e(n,u,c){var i,d,f;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&t&&r&&p&&a){e.next=2;break}return e.abrupt("return");case 2:return i=(0,k.uN)(n,m.RB,a),e.next=5,i.balanceOf(null===p||void 0===p?void 0:p.address);case 5:if(d=e.sent,!u.gt(d)){e.next=8;break}return e.abrupt("return",v(n,d,u));case 8:return e.prev=8,e.next=11,a.getSigner().sendTransaction(Z({from:r,to:p.address},s({bentobox:p,tokenAddress:n,account:r,amount:u,chainId:t,share:c})));case 11:if(null===(f=e.sent)||void 0===f||!f.hash){e.next=14;break}return e.abrupt("return",o(f,{summary:"Withdraw from Bentobox"}));case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(8),console.error("Bentobox withdraw error:",e.t0),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n,r,t){return e.apply(this,arguments)}}(),[r,o,p,t,a,v]),D=(0,y.useCallback)(function(){var e=(0,h.Z)(g().mark((function e(n){var u,c,i=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i.length>1&&void 0!==i[1]&&i[1],!t&&p&&a&&r){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,a.getSigner().sendTransaction(Z({from:r,to:p.address},d({bentobox:p,tokenAddress:n,rebalance:u})));case 6:if(null===(c=e.sent)||void 0===c||!c.hash){e.next=9;break}return e.abrupt("return",o(c,{summary:u?"Harvest & Rebalance":"Harvest"}));case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(3),console.error("bentobox harvest error:",e.t0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),[r,o,p,t,a]);return{deposit:A,withdraw:F,harvest:D,withdrawWithHarvest:v}},C=(r(89638),r(37601),r(54907));r(980),r(1082);var D=r(76294),Q=r(80113),T=r(90573)},76294:function(e,n,r){var t=r(74221),a=r(67294);t.Z.IFuseOptions;n.Z=function(e){var n=e.data,r=e.options,o=(0,a.useState)(""),u=o[0],c=o[1],i=(0,a.useCallback)((function(){return c("")}),[]);return(0,a.useMemo)((function(){var e=function(e){var n=e.fuse,r=e.data,t=e.term,a=n.search(t);return t?a.map((function(e){return e.item})):r}({fuse:new t.Z(n||[],r),data:n,term:u});return{result:e,search:c,term:u,reset:i}}),[n,r,i,u])}},80113:function(e,n,r){var t=r(27812),a=r(2593),o=r(31518),u=r(67294);function c(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";try{return n.replace("[",r).replace("]","").split(r).reduce((function(e,n){return e[n]}),e)}catch(t){return}}n.Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,u.useState)(n),i=r[0],s=r[1],d=(0,u.useMemo)((function(){if(e&&e.length>0){var n=(0,t.Z)(e);return null!==i&&n.sort((function(e,n){var r=c(e,i.key),t=c(n,i.key);if("number"===typeof r&&"number"===typeof t){if(r===1/0)return"ascending"===i.direction?-1:1;if(t===1/0)return"ascending"===i.direction?1:-1;if(r<t)return"ascending"===i.direction?-1:1;if(r>t)return"ascending"===i.direction?1:-1}if(r instanceof a.O$&&t instanceof a.O$){if(r.lt(t))return"ascending"===i.direction?-1:1;if(r.gt(t))return"ascending"===i.direction?1:-1}if(r instanceof o.QA&&t instanceof o.QA){if(o.QA.lessThan(r,t))return"ascending"===i.direction?-1:1;if(o.QA.greaterThan(r,t))return"ascending"===i.direction?1:-1}if(r instanceof o.ih&&t instanceof o.ih){if(r.lessThan(t))return"ascending"===i.direction?-1:1;if(r.greaterThan(t))return"ascending"===i.direction?1:-1}return r?t?0:-1:1})),n}return[]}),[e,i]),f=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ascending";i&&i.key===e&&"ascending"===i.direction?n="descending":i&&i.key===e&&"descending"===i.direction&&(n="ascending"),s({key:e,direction:n})};return{items:d,requestSort:f,sortConfig:i}}}}]);