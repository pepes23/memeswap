"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6706],{3382:function(e,t,r){var n=r(31969),a=r(76866),s=(r(67294),r(85893));t.Z=function(e){var t=e.children,r=e.className;return(0,a.Z)()?(0,s.jsxs)("div",{className:(0,n.AK)(r,"relative w-full max-w-2xl"),children:[(0,s.jsx)("div",{className:(0,n.AK)("from-pink/5 to-blue/5 fixed inset-0 bg-gradient-radial z-0 pointer-events-none")}),(0,s.jsx)("div",{className:"relative filter z-10",children:t})]}):(0,s.jsx)(s.Fragment,{children:t})}},26587:function(e,t,r){r(67294);var n=r(85893);function a(e){return(e=parseFloat(e))<100&&e>=90?"#ff3a31":e<90&&e>=80?"#f85815":e<80&&e>=70?"#ed7000":e<70&&e>=60?"#de8400":e<60&&e>=50?"#ce9700":e<50&&e>=40?"#bba700":e<40&&e>=30?"#a6b500":e<30&&e>=20?"#8fc21b":e<20&&e>=10?"#73ce42":e<10&&e>=0||0==e?"#4ed864":"#ff3a31"}function s(e){return(e=parseFloat(e))<10&&e>=0?"#ff3a31":e<20&&e>=10?"#f85815":e<30&&e>=20?"#ed7000":e<40&&e>=30?"#de8400":e<50&&e>=40?"#ce9700":e<60&&e>=50?"#bba700":e<70&&e>=60?"#a6b500":e<80&&e>=70?"#8fc21b":e<90&&e>=80?"#73ce42":e<100&&e>=90||e>=100?"#4ed864":"#ff3a31"}t.ZP=function(e){var t=e.percent,r=e.desc,i=void 0===r||r;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{style:{display:"block",height:"0.5rem",width:"0.5rem",borderRadius:"9999px",marginLeft:"0.5rem",background:"".concat(i?a(t):s(t))}})})}},95203:function(e,t,r){var n=r(59499),a=r(4730),s=r(56727),i=r(71862),o=r(67294),l=r(31969),c=r(85893),d=["children","size","className","variant"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={filled:{group:"border border-dark-800 rounded p-0.5 bg-dark-900",option:{checked:function(e){return e?"border-transparent border-gradient-r-blue-pink-dark-900":"border-transparent"},default:"py-1 rounded-lg border"}},outlined:{group:"gap-2",option:{checked:function(e){return e?"border-dark-700 bg-gradient-to-r from-blue to-pink":"border-dark-700"},default:"py-3 rounded border"}}},h=function(e){var t=e.children,r=e.size,n=e.className,i=void 0===n?"":n,u=e.variant,h=void 0===u?"filled":u,v=(0,a.Z)(e,d);return(0,c.jsx)(s.Ee,x(x({},v),{},{className:(0,l.AK)(i,"flex bg-dark-1000/40 rounded-full",m[h].group),children:o.Children.map(t,(function(e){return(0,o.isValidElement)(e)?(0,o.cloneElement)(e,{variant:h,size:r,style:{width:"calc(100% / ".concat(o.Children.toArray(t).length,")")}}):e}))}))};h.Button=function(e){var t=e.value,r=e.children,n=e.size,a=e.style,l=e.className;return(0,c.jsx)(s.Ee.Option,{value:t,as:o.Fragment,children:function(e){var s=e.checked;return(0,c.jsx)(i.ZP,{style:a,size:n,id:"radio-option-".concat(t),variant:s?"filled":"empty",color:s?"blue":"gray",className:l,type:"button",children:r})}})},t.Z=h},26706:function(e,t,r){r.d(t,{Ho:function(){return d},jz:function(){return A},ie:function(){return ae},JA:function(){return xe},wu:function(){return Y},_2:function(){return me},PG:function(){return ve},zE:function(){return pe},vu:function(){return we},NF:function(){return _e},Mp:function(){return n},Hc:function(){return Ze},EG:function(){return Se},rq:function(){return Pe},W9:function(){return q},JM:function(){return Ee},Kk:function(){return ke},Ue:function(){return Be}});var n,a=r(49501),s=r(95203),i=r(73179),o=r(11163),l=r(67294),c=r(85893);!function(e){e.DEPOSIT="deposit",e.WITHDRAW="withdraw",e.BORROW="borrow",e.REPAY="repay"}(n||(n={}));var d=function(){var e=(0,a.mV)().i18n,t=(0,o.useRouter)(),r=(0,l.useState)(t.query.view||n.REPAY),d=r[0],u=r[1];return(0,c.jsx)(i.yz,{children:(0,c.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,c.jsxs)(s.Z,{size:"sm",value:d,onChange:u,variant:"filled",className:"flex flex-grow bg-dark-800",children:[(0,c.jsx)(s.Z.Button,{value:n.REPAY,children:e._(e._("Repay"))}),(0,c.jsx)(s.Z.Button,{value:n.WITHDRAW,children:e._(e._("Withdraw"))})]}),d===n.REPAY&&(0,c.jsx)(we,{}),d===n.WITHDRAW&&(0,c.jsx)(Pe,{})]})})},u=r(50029),x=r(16835),m=r(87794),h=r.n(m),v=r(2593),f=r(56727);var p=l.forwardRef((function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"}))})),g=r(8694),j=r(31518),w=r(70867),b=r(54962),y=r(56785),N=r(42388),A=function(e){var t=e.market,r=(0,N.ZP)(),n=(0,x.Z)(r,5)[4],a=(0,l.useCallback)(function(){var e=(0,u.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.updateExchangeRate(!1,v.O$.from(0),v.O$.from(0)),e.abrupt("return",g.ag._(g.ag._("Update Price")));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),s=(0,l.useCallback)(function(){var e=(0,u.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.add(w.yJ,"0x00"),e.abrupt("return",g.ag._(g.ag._("Accrue")));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),i=(0,l.useMemo)((function(){var e=(0,j.gW)(j.QA.subtract(t.exchangeRate,t.oracleExchangeRate),j.QA.BigInt(0));return j.QA.greaterThan(t.exchangeRate,j.xE)?new j.gG(e,t.exchangeRate).toFixed(2):"-"}),[t]);return(0,c.jsxs)(f.v2,{as:"div",children:[(0,c.jsx)("div",{children:(0,c.jsx)(f.v2.Button,{children:(0,c.jsx)("div",{className:"flex items-center justify-center p-2 rounded-full cursor-pointer hover:text-white",children:(0,c.jsx)(p,{width:18,height:18})})})}),(0,c.jsx)(f.uT,{as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,c.jsxs)(f.v2.Items,{static:!0,className:"shadow-md absolute max-h-[240px] overflow-auto border mt-2 divide-y rounded focus:outline-none border-dark-700 bg-dark-800 divide-dark-700",children:[(0,c.jsx)(f.v2.Item,{onClick:function(e){e.preventDefault(),n(t,s)},children:(0,c.jsxs)(y.Z,{variant:"sm",weight:700,className:"flex px-3 py-2 cursor-pointer hover:bg-dark-900/40",children:[g.ag._(g.ag._("Accrue")),(0,c.jsx)(b.Z,{text:(0,c.jsx)("div",{className:"flex flex-col gap-2",children:(0,c.jsx)(y.Z,{variant:"xs",className:"text-white",children:g.ag._(g.ag._("Accrue the interest rate on borrowed tokens and update the interest rate"))})})})]})}),(0,c.jsx)(f.v2.Item,{onClick:function(e){e.preventDefault(),n(t,a)},children:(0,c.jsxs)(y.Z,{variant:"sm",weight:700,className:"flex px-3 py-2 cursor-pointer hover:bg-dark-900/40",children:[g.ag._(g.ag._("Update Price")),(0,c.jsx)(b.Z,{text:(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-white",children:g.ag._(g.ag._("Update the oracle exchange rate"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"italic",children:g.ag._(g.ag._("Current deviation: {priceChange}%",{priceChange:i}))})]})})]})})]})})]})},k=r(71862),_=r(81531),Z=r(63553),S=r(37247),C=r(46576),O=r(82262),P=r(92777),R=r(59499);function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,S.Z)(e);if(t){var a=(0,S.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,Z.Z)(this,r)}}var E=(0,O.Z)((function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;(0,P.Z)(this,e),(0,R.Z)(this,"active",!1),(0,R.Z)(this,"message",""),(0,R.Z)(this,"breaking",!1),(0,R.Z)(this,"or",void 0),this.active=t,this.message=r,this.breaking=n,this.or=a})),T=function(e){(0,_.Z)(r,e);var t=B(r);function r(){return(0,P.Z)(this,r),t.apply(this,arguments)}return(0,O.Z)(r,[{key:"_add",value:function(e){e.active?this.push(e):e.or&&this._add(e.or)}},{key:"add",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return this._add(new E(e,t,r,n)),this}},{key:"addWarning",value:function(e,t,r){return this._add(new E(e,t,!1,r)),this}},{key:"addError",value:function(e,t,r){return this._add(new E(e,t,!0,r)),this}},{key:"broken",get:function(){return this.some((function(e){return e.breaking}))}}]),r}((0,C.Z)(Array)),W=r(49932),I=r(31969),D=r(53389),F=r(15423),M=r(12614),Q=r(45486);r(94492);var z=r(573),U=r(41626),V=r(70028),K=r(54684),L=r(56388),H=(0,l.createContext)(void 0),Y=function(e){var t=e.market,r=e.children;return(0,c.jsx)(H.Provider,{value:(0,l.useMemo)((function(){return{market:t}}),[t]),children:r})},q=function(){var e=(0,l.useContext)(H);if(!e)throw new Error("Hook can only be used inside Kashi Market Context");return e},G=r(26587),J=function(e){var t=e.setCollateralAmount,r=e.setBorrowAmount,n=(0,a.mV)().i18n,s=q().market,i=j.ih.fromRawAmount((0,I.Bv)(s.collateral.token),s.userCollateralAmount),o=j.ih.fromRawAmount((0,I.Bv)(s.asset.token),s.currentUserBorrowAmount);return(0,c.jsxs)("div",{className:"grid grid-cols-3 px-3",children:[(0,c.jsxs)("div",{className:"flex flex-col items-baseline",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:n._(n._("Collateralized"))}),(0,c.jsxs)(y.Z,{weight:700,variant:"sm",className:(0,I.AK)(t?"cursor-pointer":"","text-high-emphesis"),onClick:function(){return t&&t(i.toExact())},children:[i.toSignificant(6),(0,c.jsxs)(y.Z,{weight:700,variant:"xs",className:"text-secondary",component:"span",children:[" ",s.collateral.token.symbol]})]})]}),(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:n._(n._("Borrowed"))}),(0,c.jsxs)(y.Z,{weight:700,variant:"sm",className:(0,I.AK)(r?"cursor-pointer":"","text-high-emphesis"),onClick:function(){return r&&r(o.toExact())},children:[o.toSignificant(6),(0,c.jsxs)(y.Z,{weight:700,variant:"xs",className:"text-secondary",component:"span",children:[" ",s.asset.token.symbol]})]})]}),(0,c.jsxs)("div",{className:"flex flex-col items-end",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-right text-secondary",children:n._(n._("Health"))}),(0,c.jsxs)(y.Z,{weight:700,variant:"sm",className:"flex items-center text-high-emphesis",children:[new j.gG(s.health,1e18).toSignificant(6),"%",(0,c.jsx)("div",{className:"-ml-1",children:(0,c.jsx)(b.Z,{icon:(0,c.jsx)(G.ZP,{percent:new j.gG(s.health,1e18).toSignificant(6)}),text:(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-white",children:n._(n._("Health of your position defined as your current borrowed amount divided by the max borrow amount given current collateral."))}),(0,c.jsx)(y.Z,{variant:"xs",className:"italic",children:n._(n._("100% means you are at max borrow"))})]})})})]})]})]})},X=r(92088),$=r(16339),ee=r(37643);var te=r(74703),re=r(68411),ne=r(81889),ae=function(e){var t=e.setLentAmount,r=(0,a.mV)().i18n,n=q().market,s=j.ih.fromRawAmount(n.asset.token,n.currentUserAssetAmount);return(0,c.jsxs)("div",{className:"grid grid-cols-3 px-3",children:[(0,c.jsxs)("div",{className:"flex flex-col items-baseline",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:r._(r._("Deposited"))}),(0,c.jsxs)(y.Z,{weight:700,variant:"sm",className:(0,I.AK)(t?"cursor-pointer":"","text-high-emphesis"),onClick:function(){return t&&t(s.toExact())},children:[s.toSignificant(6),(0,c.jsxs)(y.Z,{weight:700,variant:"xs",className:"text-secondary",component:"span",children:[" ",n.asset.token.symbol]})]})]}),(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:r._(r._("Borrowed"))}),(0,c.jsxs)(y.Z,{weight:700,variant:"sm",className:"text-high-emphesis",children:[new j.gG(n.utilization,1e18).toSignificant(6),"%"]})]}),(0,c.jsxs)("div",{className:"flex flex-col items-end",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary text-right",children:r._(r._("Supply APR"))}),(0,c.jsxs)(y.Z,{weight:700,variant:"sm",className:"text-high-emphesis flex items-center",children:[new j.gG(n.supplyAPR,1e18).toSignificant(6),"%"]})]})]})},se=r(61782);var ie=l.forwardRef((function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"}))})),oe=r(70518),le=r(84329),ce=function(e){var t=e.lentAmount,r=e.view,s=(0,M.aQ)().chainId,i=(0,a.mV)().i18n,o=q().market,l=(0,le.Mh)({chainId:s,variables:{where:{token:o.collateral.token.address.toLowerCase()}}}),d=null===l||void 0===l?void 0:l[0],u=j.ih.fromRawAmount((0,I.Bv)(o.asset.token),o.currentUserAssetAmount),x=t&&j.ih.fromRawAmount(t.currency,o.currentUserAssetAmount)[r===n.DEPOSIT?"add":"subtract"](t);return(0,c.jsxs)("div",{className:"flex flex-col divide-y divide-dark-850",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-1 pb-2",children:[(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:i._(i._("Supply APR"))}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right",children:[new j.gG(o.supplyAPR,1e18).toFixed(6),"%"]})]}),j.QA.greaterThan(o.utilization,j.xE)&&(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:i._(i._("Health"))}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right",children:[new j.gG(o.marketHealth,1e18).toFixed(6),"%"]})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsxs)(y.Z,{variant:"xs",className:"flex items-center",children:[i._(i._("BentoBox strategy")),(0,c.jsx)(b.Z,{text:(0,c.jsx)("div",{children:(0,c.jsx)(y.Z,{variant:"xs",children:"BentoBox strategies can create yield for your liquidity while it is not lent out."})})})]}),d?(0,c.jsx)(oe.ZP,{text:(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:i._(i._("Strategy APY"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"text-right",children:(0,I.T3)(d.apy)})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:i._(i._("Current Percentage"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"text-right",children:(0,I.T3)(d.utilization)})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:i._(i._("Target Percentage"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"text-right",children:(0,I.T3)(d.targetPercentage)})]})]}),children:(0,c.jsxs)(y.Z,{variant:"xs",className:(0,I.AK)(d?"text-blue":"","text-right"),children:[d?i._(i._("Active")):i._(i._("None"))," "]})}):(0,c.jsxs)(y.Z,{variant:"xs",className:(0,I.AK)(d?"text-blue":"","text-right"),children:[d?i._(i._("Active")):i._(i._("None"))," "]})]})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-1 pt-2",children:[(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:i._(i._("Total lent"))}),(0,c.jsxs)("div",{className:"flex gap-1",children:[(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right text-secondary",children:[null===u||void 0===u?void 0:u.toSignificant(6)," ",null===u||void 0===u?void 0:u.currency.symbol]}),(0,c.jsx)(ie,{width:14,className:"text-secondary"}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right",children:[null===x||void 0===x?void 0:x.toSignificant(6)," ",null===u||void 0===u?void 0:u.currency.symbol]})]})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:i._(i._("Oracle"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"text-right text-secondary",children:o.oracle.name})]})]})]})},de=function(e){var t=e.lentAmount,r=e.view,s=(0,a.mV)().i18n,i=q().market,o=j.ih.fromRawAmount((0,I.Bv)(i.asset.token),i.currentUserAssetAmount),d=t&&j.ih.fromRawAmount(t.currency,i.currentUserAssetAmount)[r===n.DEPOSIT?"add":"subtract"](t);return(0,c.jsx)(f.pJ,{as:"div",children:function(e){var n=e.open;return(0,c.jsxs)("div",{className:(0,I.AK)(n?"bg-dark-900":"","shadow-inner flex flex-col gap-2 py-2 rounded px-2 border border-dark-700 transition hover:border-dark-700"),children:[(0,c.jsxs)("div",{className:"flex items-center justify-between gap-2 pl-1",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(y.Z,{variant:"xs",weight:700,children:s._(s._("Deposited"))}),(0,c.jsxs)("div",{className:"flex justify-between gap-1",children:[(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right text-secondary",children:[null===o||void 0===o?void 0:o.toSignificant(6)," ",null===o||void 0===o?void 0:o.currency.symbol]}),(0,c.jsx)(ie,{width:14,className:"text-secondary"}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right",children:[null===d||void 0===d?void 0:d.toSignificant(6)," ",null===o||void 0===o?void 0:o.currency.symbol]})]})]}),(0,c.jsx)(f.pJ.Button,{as:l.Fragment,children:(0,c.jsx)("div",{className:"flex items-center justify-end flex-grow p-1 rounded cursor-pointer",children:(0,c.jsx)(se.Z,{width:20,className:(0,I.AK)(n?"transform rotate-180":"","transition hover:text-white")})})})]}),(0,c.jsx)(f.uT,{show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",unmount:!1,children:(0,c.jsx)(f.pJ.Panel,{static:!0,className:"px-1 pt-2",children:(0,c.jsx)(ce,{lentAmount:t,view:r})})})]})}})};var ue=function(e){var t=e.trade,r=e.priceImpact,s=e.collateralAmount,i=e.borrowAmount,o=e.multiplier,l=e.view,d=(0,M.aQ)().chainId,u=(0,a.mV)().i18n,x=q().market,m=(0,le.Mh)({chainId:d,variables:{where:{token:x.collateral.token.address.toLowerCase()}}}),h=null===m||void 0===m?void 0:m[0],v=(0,$.C)(ee.tE),f=j.ih.fromRawAmount((0,I.Bv)(x.asset.token),x.currentUserBorrowAmount),p=j.ih.fromRawAmount((0,I.Bv)(x.collateral.token),x.userCollateralAmount),g=l===n.BORROW&&o&&t?t.minimumAmountOut(v):j.ih.fromRawAmount((0,I.Bv)(x.collateral.token),j.QA.BigInt(0)),w=s?p[l===n.BORROW?"add":"subtract"](s.add(g)):j.ih.fromRawAmount(x.collateral.token,x.userCollateralAmount),N=i?f[l===n.BORROW?"add":"subtract"](i):j.ih.fromRawAmount(x.asset.token,x.currentUserBorrowAmount);return(0,c.jsxs)("div",{className:"flex flex-col divide-y divide-dark-850",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-1 pb-2",children:[(s||i)&&(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:u._(u._("Position Health"))}),(0,c.jsxs)("div",{className:"flex gap-1",children:[(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right text-secondary",children:[new j.gG(x.health,1e18).toSignificant(6),"%"]}),(0,c.jsx)(ie,{width:14,className:"text-secondary"}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right",children:[new j.gG(x.simulatedHealth(null===N||void 0===N?void 0:N.quotient,null===w||void 0===w?void 0:w.quotient),1e18).toSignificant(6),"%"]})]})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:u._(u._("APR (annualized)"))}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right",children:[new j.gG(x.currentInterestPerYear,1e18).toFixed(2),"%"]})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:u._(u._("Loan to Value (LTV)"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"text-right",children:"75%"})]}),r&&(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:u._(u._("Price Impact"))}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right",children:[r.toSignificant(2),"%"]})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsxs)(y.Z,{variant:"xs",className:"flex items-center",children:[u._(u._("BentoBox strategy")),(0,c.jsx)(b.Z,{text:(0,c.jsx)("div",{children:(0,c.jsx)(y.Z,{variant:"xs",children:"BentoBox strategies can create yield for your liquidity while it is not lent out."})})})]}),h?(0,c.jsx)(oe.ZP,{text:(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:u._(u._("Strategy APY"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"text-right",children:(0,I.T3)(h.apy)})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:u._(u._("Current Percentage"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"text-right",children:(0,I.T3)(h.utilization)})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",children:u._(u._("Target Percentage"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"text-right",children:(0,I.T3)(h.targetPercentage)})]})]}),children:(0,c.jsxs)(y.Z,{variant:"xs",className:(0,I.AK)(h?"text-blue":"","text-right"),children:[h?u._(u._("Active")):u._(u._("None"))," "]})}):(0,c.jsxs)(y.Z,{variant:"xs",className:(0,I.AK)(h?"text-blue":"","text-right"),children:[h?u._(u._("Active")):u._(u._("None"))," "]})]})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-1 pt-2",children:[s&&(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:u._(u._("Total collateral"))}),(0,c.jsxs)("div",{className:"flex gap-1",children:[(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right text-secondary",children:[p.toSignificant(6)," ",x.collateral.token.symbol]}),(0,c.jsx)(ie,{width:14,className:"text-secondary"}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right",children:[null===w||void 0===w?void 0:w.toSignificant(6)," ",x.collateral.token.symbol]})]})]}),i&&(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:u._(u._("Total borrowed"))}),(0,c.jsxs)("div",{className:"flex gap-1",children:[(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right text-secondary",children:[null===f||void 0===f?void 0:f.toSignificant(6)," ",x.asset.token.symbol]}),(0,c.jsx)(ie,{width:14,className:"text-secondary"}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-right",children:[null===N||void 0===N?void 0:N.toSignificant(6)," ",x.asset.token.symbol]})]})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:u._(u._("Oracle"))}),(0,c.jsx)(y.Z,{variant:"xs",className:"text-right text-secondary",children:x.oracle.name})]})]})]})},xe=function(e){var t=e.priceImpact,r=e.collateralAmount,s=e.borrowAmount,i=e.multiplier,o=e.view,d=e.trade,u=(0,a.mV)().i18n,x=(0,l.useState)(!1),m=x[0],h=x[1],v=Ee({invert:m,borrowAmount:s,collateralAmount:r,trade:d,reduce:o===n.REPAY});return(0,c.jsx)(f.pJ,{as:"div",children:function(e){var a=e.open;return(0,c.jsxs)("div",{className:(0,I.AK)(a?"bg-dark-900":"","shadow-inner flex flex-col gap-2 py-2 rounded px-2 border border-dark-700 transition hover:border-dark-700"),children:[(0,c.jsxs)("div",{className:"flex items-center justify-between gap-2 pl-1",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsxs)(y.Z,{variant:"xs",weight:700,className:"flex gap-2 -ml-1",children:[(0,c.jsx)(b.Z,{text:(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-white",children:u._(u._("When the value of your collateral becomes less than the asset you borrow, your position gets liquidated."))}),(0,c.jsx)(y.Z,{variant:"xs",className:"italic",children:u._(u._("When a non-leveraged positions gets liquidated, you lose the collateral but you can keep the borrowed assets"))})]})}),o===n.BORROW?u._(u._("Liquidation Price")):u._(u._("New Liquidation Price"))]}),v&&(0,c.jsx)(y.Z,{onClick:function(){return h((function(e){return!e}))},variant:"xs",weight:700,className:"py-1 rounded rounded-full cursor-pointer hover:text-high-emphesis",children:v})]}),(0,c.jsx)(f.pJ.Button,{as:l.Fragment,children:(0,c.jsx)("div",{className:"flex items-center justify-end flex-grow p-1 rounded cursor-pointer",children:(0,c.jsx)(se.Z,{width:20,className:(0,I.AK)(a?"transform rotate-180":"","transition hover:text-white")})})})]}),(0,c.jsx)(f.uT,{show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",unmount:!1,children:(0,c.jsx)(f.pJ.Panel,{static:!0,className:"px-1 pt-2",children:(0,c.jsx)(ue,{trade:d,priceImpact:t,collateralAmount:r,multiplier:i,borrowAmount:s,view:o})})})]})}})},me=function(e){var t=e.closePosition,r=e.repayFromWallet,n=e.removeToWallet,s=e.repayAmount,i=e.removeAmount,o=e.trade,d=e.view,u=e.repayMax,x=e.removeMax,m=e.nextMaxRemoveCollateral,h=e.nextMinCollateralMinimum,v=(0,M.aQ)().account,f=(0,a.mV)().i18n,p=q().market,g=(0,I.Bv)(p.asset.token),w=((0,I.Bv)(p.collateral.token),(0,M.aQ)().chainId),b=(0,F.C)(null!==v&&void 0!==v?v:void 0,g,r),N=(0,l.useState)(),A=N[0],_=N[1],Z=(0,l.useState)(!1),S=Z[0],C=Z[1],O=(0,D.rO)(),P=w?j.MO[w]:void 0,R=(0,l.useState)(!1),B=R[0],Q=R[1],z=i?j.ih.fromRawAmount(i.currency,p.totalCollateralAmount):void 0,U=v?t||null!==s&&void 0!==s&&s.greaterThan(j.xE)||null!==i&&void 0!==i&&i.greaterThan(j.xE)?b?null!==s&&void 0!==s&&s.greaterThan(b)?f._(f._("Insufficient balance")):z&&i&&i.greaterThan(z)?f._(f._("Not enough {0} available",{0:i.currency.symbol})):null!==i&&void 0!==i&&i.greaterThan(p.userCollateralAmount)?f._(f._("Withdraw too large")):null!==s&&void 0!==s&&s.greaterThan(p.currentUserBorrowAmount)?"Repay larger than debt":"":f._(f._("Loading balance")):f._(f._("Enter an amount")):f._(f._("Connect Wallet")),V=U||(t?f._(f._("Close Position")):null!==i&&void 0!==i&&i.greaterThan(j.xE)&&null!==s&&void 0!==s&&s.greaterThan(j.xE)?f._(f._("Repay and Remove")):null!==i&&void 0!==i&&i.greaterThan(j.xE)?f._(f._("Remove Collateral")):null!==s&&void 0!==s&&s.greaterThan(j.xE)?f._(f._("Repay Debt")):""),K=new T;return K.addError(Boolean(w&&g.wrapped.address===j.df[w]&&r&&u),"You cannot MAX repay ".concat(g.symbol," directly from your wallet. Please deposit your ").concat(g.symbol," into the BentoBox first, then repay. Because your debt is slowly accruing interest we can't predict how much it will be once your transaction gets mined.")).addError(S,f._(f._("Something went wrong during signing of the approval. This is expected for hardware wallets, such as Trezor and Ledger. Click 'Approve BentoBox' again for approving using the fallback method"))).addError(Boolean(s&&j.QA.greaterThan(s.quotient,p.currentUserBorrowAmount)),"You can't repay more than you owe. To fully repay, please click the 'max' button.",new E(Boolean(b&&s&&b.lessThan(s)),"Please make sure your ".concat(r?"wallet":"BentoBox"," balance is sufficient to repay and then try again."),!0)).addError(Boolean(i&&(null===i||void 0===i?void 0:i.greaterThan((0,j.gW)(j.QA.subtract(p.userCollateralAmount,h),j.xE)))),"Removing this much collateral would put you into insolvency.",new E(Boolean(i&&(null===i||void 0===i?void 0:i.greaterThan(m))),"Removing this much collateral would put you very close to insolvency.")),(0,c.jsxs)(c.Fragment,{children:[K.reduce((function(e,t,r){return t&&e.push((0,c.jsx)(y.Z,{variant:"sm",className:"p-4 text-center border rounded border-yellow/40 text-yellow",children:t.message},r)),e}),[]),(0,c.jsx)(W.Z,{spendFromWallet:r,inputAmounts:t?[]:[s],tokenApproveOn:null===O||void 0===O?void 0:O.address,masterContractAddress:P,withPermit:!0,permit:A,onPermit:_,onPermitError:function(){return C(!0)},children:function(e){var t=e.approved,r=e.loading,n=!!U||!t||r||K.some((function(e){return e.breaking}));return(0,c.jsx)(k.ZP,{loading:r,color:"gradient",disabled:n,onClick:function(){return Q(!0)},className:"rounded-2xl md:rounded",children:V})}}),(0,c.jsx)(pe,{open:B,onDismiss:function(){return Q(!1)},repayFromWallet:r,repayAmount:s,removeToWallet:n,removeAmount:i,closePosition:t,trade:o,view:d,removeMax:x,repayMax:u,permit:A})]})},he=r(64343),ve=function(e){var t=e.enabled,r=e.onSwitch,n=e.setRepayAmount,s=e.setRemoveAmount,i=(0,a.mV)().i18n,o=q().market,d=j.ih.fromRawAmount((0,I.Bv)(o.asset.token),o.currentUserBorrowAmount),u=j.ih.fromRawAmount((0,I.Bv)(o.collateral.token),o.userCollateralAmount);return(0,c.jsx)(f.pJ,{as:"div",children:function(e){var a=e.open;return(0,c.jsxs)("div",{className:(0,I.AK)(a?"bg-dark-900":"","shadow-inner flex flex-col gap-2 py-2 rounded px-2 border border-dark-700 transition hover:border-dark-700"),children:[(0,c.jsxs)("div",{className:"flex justify-between gap-2 items-center pl-1",children:[(0,c.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,c.jsxs)(y.Z,{variant:"xs",weight:700,className:"flex -ml-1 gap-2",children:[(0,c.jsx)(b.Z,{text:(0,c.jsx)("div",{className:"flex flex-col gap-2",children:(0,c.jsx)(y.Z,{variant:"xs",className:"text-white",children:i._(i._("Close your position by swapping your collateral for the borrowed asset"))})})}),i._(i._("Close Position"))]}),(0,c.jsx)(z.Z,{size:"sm",id:"toggle-expert-mode-button",checked:t,onChange:r,checkedIcon:(0,c.jsx)(he.Z,{className:"text-dark-700"}),uncheckedIcon:(0,c.jsx)(Q.Z,{}),color:"gradient"})]}),(0,c.jsx)(f.pJ.Button,{as:l.Fragment,children:(0,c.jsx)("div",{className:"flex flex-grow items-center justify-end p-1 cursor-pointer rounded",children:(0,c.jsx)(se.Z,{width:20,className:(0,I.AK)(a?"transform rotate-180":"","transition hover:text-white")})})})]}),(0,c.jsx)(f.uT,{show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",unmount:!1,children:(0,c.jsx)(f.pJ.Panel,{static:!0,className:"px-2 pb-2 pt-1",children:(0,c.jsxs)("div",{className:"rounded flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"flex gap-2 items-center cursor-pointer",onClick:function(){return s(null===u||void 0===u?void 0:u.toExact())},children:[(0,c.jsx)(U.X,{currency:o.collateral.token,size:20}),(0,c.jsxs)(y.Z,{variant:"sm",weight:700,children:["Collateral ",u.toSignificant(6)," ",u.currency.symbol]})]}),(0,c.jsxs)("div",{className:"flex gap-2 items-center cursor-pointer",onClick:function(){return n(null===d||void 0===d?void 0:d.toExact())},children:[(0,c.jsx)(U.X,{currency:o.asset.token,size:20}),(0,c.jsxs)(y.Z,{variant:"sm",weight:700,children:["Borrowed ",d.toSignificant(6)," ",d.currency.symbol]})]})]})})})]})}})},fe=r(627),pe=function(e){var t,r,n=e.trade,s=e.repayFromWallet,i=e.removeToWallet,o=e.repayAmount,d=e.removeAmount,x=e.closePosition,m=e.open,v=e.onDismiss,f=e.view,p=e.removeMax,g=e.repayMax,w=(0,a.mV)().i18n,b=q().market,N=(0,l.useState)(),A=N[0],_=N[1],Z=(0,l.useState)(!1),S=Z[0],C=Z[1],O=ke(),P=j.ih.fromRawAmount((0,I.Bv)(b.asset.token),b.currentUserBorrowAmount),R=j.ih.fromRawAmount((0,I.Bv)(b.collateral.token),b.userCollateralAmount),B=(0,l.useCallback)((0,u.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,O({trade:n,repayFromWallet:s,repayAmount:o,closePosition:x,removeToWallet:i,removeAmount:d,removeMax:p,repayMax:g});case 4:null!==(t=e.sent)&&void 0!==t&&t.hash&&_(t.hash);case 6:return e.prev=6,C(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])}))),[x,O,d,p,i,o,s,g,n]),E=(0,I.oX)(null===n||void 0===n?void 0:n.priceImpact),T=(0,fe.LO)();return(0,c.jsx)(V.S.Controlled,{isOpen:m,onDismiss:v,maxWidth:"md",afterLeave:function(){return _(void 0)},children:A?(0,c.jsx)(K.Z,{header:w._(w._("Success!")),subheader:w._(w._("Success! Repay Submitted")),txHash:A,onDismiss:v}):(0,c.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,c.jsx)(V.S.Header,{header:x?w._(w._("Close Position")):w._(w._("Confirm Repay")),onClose:v}),x?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(y.Z,{variant:"sm",children:w._(w._("You will be closing this position by swapping your collateral for your borrowed debt. Any collateral remainder will be sent to your {0}",{0:i?"wallet":"BentoBox"}))}),(0,c.jsxs)(V.S.BorderedContent,{className:"flex flex-col gap-4 bg-dark-1000/40 !border-dark-700",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:w._(w._("Collateral that will be swapped"))}),(0,c.jsxs)("div",{className:"inline-flex gap-2",children:[(0,c.jsx)(U.X,{currency:b.collateral.token,size:20}),(0,c.jsxs)(y.Z,{weight:700,component:"span",className:"text-high-emphesis",children:[null===n||void 0===n||null===(t=n.inputAmount)||void 0===t?void 0:t.toSignificant(6),(0,c.jsxs)(y.Z,{weight:700,className:"text-low-emphesis",component:"span",children:[" ","/ ",R.toSignificant(6)," ",null===n||void 0===n?void 0:n.inputAmount.currency.symbol]})," "]})]})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:w._(w._("To repay borrowed tokens"))}),(0,c.jsxs)("div",{className:"inline-flex gap-2",children:[(0,c.jsx)(U.X,{currency:b.asset.token,size:20}),(0,c.jsxs)(y.Z,{weight:700,component:"span",className:"text-high-emphesis",children:[null===P||void 0===P?void 0:P.toSignificant(6)," ",(0,c.jsx)(y.Z,{weight:700,className:"text-low-emphesis",component:"span",children:P.currency.symbol})]})]})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:w._(w._("Price Impact"))}),(0,c.jsxs)(y.Z,{variant:"xs",className:"text-high-emphesis",children:[null===n||void 0===n||null===(r=n.priceImpact)||void 0===r?void 0:r.toFixed(2),"%"]})]})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(y.Z,{variant:"sm",children:w._(w._("You will be reducing this position by"))}),(0,c.jsxs)(V.S.BorderedContent,{className:"flex flex-col gap-4 bg-dark-1000/40 !border-dark-700",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:w._(w._("And removing"))}),(0,c.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,c.jsx)(U.X,{currency:b.collateral.token,size:20}),(0,c.jsxs)("b",{children:[null!==d&&void 0!==d&&d.greaterThan(0)?null===d||void 0===d?void 0:d.toSignificant(6):"0"," ",null===d||void 0===d?void 0:d.currency.symbol]})]})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:w._(w._("Repaying"))}),(0,c.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,c.jsx)(U.X,{currency:b.asset.token,size:20}),(0,c.jsxs)("b",{children:[null!==o&&void 0!==o&&o.greaterThan(0)?null===o||void 0===o?void 0:o.toSignificant(6):"0"," ",null===o||void 0===o?void 0:o.currency.symbol]})]})]})]})]}),(0,c.jsx)(xe,{view:f,collateralAmount:x?R:d,borrowAmount:x?P:o}),(0,c.jsx)(k.ZP,{loading:S,color:"gradient",disabled:S||E>3&&!T&&x,onClick:B,children:x?E>3&&!T?w._(w._("Price Impact Too High")):E>2?w._(w._("Close Position Anyway")):w._(w._("Close Position")):w._(w._("Confirm Repay"))})]})})};function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){(0,R.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var we=function(){var e,t=(0,a.mV)().i18n,r=q().market,s=(0,l.useState)(!1),i=s[0],o=s[1],d=(0,l.useState)(!0),u=d[0],x=d[1],m=(0,l.useState)(!0),h=m[0],v=m[1],f=(0,l.useState)(),p=f[0],g=f[1],w=(0,l.useState)(),b=w[0],N=w[1],A=(0,l.useState)(!1),k=A[0],_=A[1],Z=(0,l.useState)(!1),S=Z[0],C=Z[1],O=(0,I.Bv)(r.asset.token),P=(0,I.Bv)(r.collateral.token),R=p?(0,I.eo)(p,O):void 0,B=b?(0,I.eo)(b,P):void 0,E=j.ih.fromRawAmount((0,I.Bv)(r.collateral.token),r.userCollateralAmount),T=j.QA.subtract(r.currentUserBorrowAmount,R?null===R||void 0===R?void 0:R.quotient:j.QA.BigInt(0)),W=j.QA.divide(j.QA.multiply(T,r.oracleExchangeRate),j.QA.multiply(j.QA.BigInt(1e16),j.QA.BigInt(75))),D=j.QA.divide(j.QA.multiply(T,r.spotExchangeRate),j.QA.multiply(j.QA.BigInt(1e16),j.QA.BigInt(75))),F=j.QA.divide(j.QA.multiply(T,r.exchangeRate),j.QA.multiply(j.QA.BigInt(1e16),j.QA.BigInt(75))),M=(0,j.gW)(W,D,F),Q=(0,j.gW)(j.QA.subtract(r.userCollateralAmount,j.QA.divide(j.QA.multiply(M,j.QA.BigInt(100)),j.QA.BigInt(75))),j.xE),z=j.ih.fromRawAmount(r.collateral.token,Q),U=j.ih.fromRawAmount((0,I.Bv)(r.asset.token),r.currentUserBorrowAmount),V=null!==(e=(0,L.k)((0,I.Bv)(r.collateral.token),j.ih.fromRawAmount((0,I.Bv)(r.asset.token),r.currentUserBorrowAmount),{maxHops:4}))&&void 0!==e?e:void 0,K=(0,l.useCallback)((function(e,t){N(e),_(t)}),[]),H=(0,l.useCallback)((function(e,t){g(e),C(t)}),[]);return(0,c.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,c.jsx)(J,{setBorrowAmount:N,setCollateralAmount:N}),(0,c.jsx)(X.Z,{disabled:i,error:null===R||void 0===R?void 0:R.greaterThan(r.currentUserBorrowAmount),header:function(e){return(0,c.jsx)(X.Z.Header,je(je({},e),{},{label:t._(t._("Repay")),hideSearchModal:!0}))},walletToggle:function(e){return(0,c.jsx)(X.Z.Switch,je(je({id:"switch-classic-withdraw-from-0}"},e),{},{label:t._(t._("Repay from")),onChange:function(){return x((function(e){return!e}))}}))},spendFromWallet:u,currency:O,value:p,onChange:g,balancePanel:function(){return(0,c.jsxs)(y.Z,{variant:"sm",className:"text-right text-secondary whitespace-nowrap",onClick:function(){return H(U.toExact(),!0)},children:["Max Repay: ",U.toSignificant(6)]})}}),(0,c.jsx)("div",{className:"flex flex-col gap-2 -mt-1.5",children:(0,c.jsx)(X.Z,{disabled:i,error:null===B||void 0===B?void 0:B.greaterThan(r.userCollateralAmount),header:function(e){return(0,c.jsx)(X.Z.Header,je(je({},e),{},{label:t._(t._("Remove")),hideSearchModal:!0}))},walletToggle:function(e){return(0,c.jsx)(X.Z.Switch,je(je({},e),{},{id:"switch-classic-withdraw-from-0}",label:t._(t._("Receive in")),onChange:function(){return v((function(e){return!e}))}}))},spendFromWallet:h,currency:P,value:b,onChange:function(e){return K(e,!1)},balancePanel:function(){return(0,c.jsxs)(y.Z,{variant:"sm",className:"text-right text-secondary whitespace-nowrap",onClick:function(){return K(z.toExact(),!0)},children:["Max Withdraw: ",E.toSignificant(6)]})}})}),(0,c.jsx)(ve,{setRepayAmount:g,setRemoveAmount:N,enabled:i,onSwitch:function(){return o((function(e){return!e}))}}),!i&&(0,c.jsx)(xe,{priceImpact:i?null===V||void 0===V?void 0:V.priceImpact:void 0,borrowAmount:R,collateralAmount:B,view:n.REPAY}),(0,c.jsx)(me,{trade:V,closePosition:i,removeAmount:B,repayAmount:R,repayFromWallet:u,removeToWallet:h,view:n.REPAY,repayMax:S,removeMax:k,nextMinCollateralMinimum:M,nextMaxRemoveCollateral:Q})]})},be=r(84243),ye=r(16441),Ne=r(9279),Ae=r(69807),ke=function(){var e=(0,a.mV)().i18n,t=(0,M.aQ)(),r=t.account,n=t.library,s=t.chainId,i=s&&j.MO[s],o=(0,re.h7)(),c=(0,$.C)(ee.tE),d=q().market;return(0,l.useCallback)(function(){var t=(0,u.Z)(h().mark((function t(a){var l,u,x,m,f,p,g,w,b,y,N,A,k,_,Z,S;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=a.trade,u=a.repayAmount,x=a.removeAmount,m=a.removeMax,f=a.repayMax,p=a.removeToWallet,g=a.repayFromWallet,w=a.closePosition,r&&n&&s&&i){t.next=4;break}return console.error("Dependencies unavailable"),t.abrupt("return");case 4:if(b=new te.Z(d,r,n,s),!w||!l){t.next=23;break}return y=j.ih.fromRawAmount(d.asset.token,d.userBorrowPart),N=l.maximumAmountIn(c),A=l.route.path.map((function(e){return e.address}))||[],b.removeCollateral(v.O$.from(d.userCollateralShare.toString()),!0),b.bentoTransferCollateral(v.O$.from(d.userCollateralShare.toString()),j.XX[s||1]),b.repayShare(v.O$.from(d.userBorrowPart.toString())),b.action(j.XX[s||1],I.xE,(0,ye.hexConcat)([(0,ye.hexlify)("0x3087d742"),be.$.encode(["address","address","uint256","address","address","address","uint256"],[d.collateral.token.address,d.asset.token.address,N.quotient.toString(),A.length>2?A[1]:Ne.d,A.length>3?A[2]:Ne.d,r,v.O$.from(d.userCollateralShare.toString())])]),!0,!1,1),b.repayPart(v.O$.from(d.userBorrowPart.toString()),!0),p&&b.bentoWithdrawCollateral(I.xE,v.O$.from(-1)),t.next=17,b.cook();case 17:if(!(k=t.sent).success){t.next=21;break}return o(k.tx,{summary:e._(e._("Repay {0} {1} using {2} {3} as collateral",{0:y.toSignificant(6),1:y.currency.symbol,2:N.toSignificant(6),3:N.currency.symbol}))}),t.abrupt("return",k.tx);case 21:t.next=32;break;case 23:return f&&j.QA.greaterThan(d.userBorrowPart,j.QA.BigInt(0))?(b.repayPart(v.O$.from(d.userBorrowPart.toString()),!g),_="Repay max"):null!==u&&void 0!==u&&u.greaterThan(j.xE)&&(b.repay(v.O$.from(u.quotient.toString()),!g),_="Repay"),m?(Z=d.userCollateralShare,_="and remove max collateral"):null!==x&&void 0!==x&&x.greaterThan(j.xE)&&(Z=(0,Ae.T)(d.collateral,x.quotient),_="and remove collateral"),Z&&b.removeCollateral(v.O$.from(Z.toString()),!p),t.next=28,b.cook();case 28:if(!(S=t.sent).success){t.next=32;break}return o(S.tx,{summary:_}),t.abrupt("return",S.tx);case 32:return t.abrupt("return",void 0);case 33:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r,o,c,s,e,n,d,i])},_e=function(){return(0,c.jsxs)("div",{className:"flex flex-col gap-3 p-2 md:p-4 pt-4 rounded-[24px] bg-dark-800 shadow-md shadow-dark-1000",children:[(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-2 h-[42px] rounded-full",children:[(0,c.jsx)("div",{className:"w-full h-full bg-dark-700 rounded-full animate-pulse"}),(0,c.jsx)("div",{className:"w-full h-full bg-dark-700 rounded-full animate-pulse"}),(0,c.jsx)("div",{className:"w-full h-full bg-dark-700 rounded-full animate-pulse"}),(0,c.jsx)("div",{className:"w-full h-full bg-dark-700 rounded-full animate-pulse"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-2 h-[36px] rounded-full",children:[(0,c.jsx)("div",{className:"w-full h-full bg-dark-700 rounded-full animate-pulse"}),(0,c.jsx)("div",{className:"w-full h-full bg-dark-700 rounded-full animate-pulse"}),(0,c.jsx)("div",{className:"w-full h-full bg-dark-700 rounded-full animate-pulse"})]}),(0,c.jsxs)("div",{className:"flex flex-col justify-between bg-dark-900 rounded h-[114px] p-4 pt-3",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between h-9",children:[(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("div",{className:"bg-dark-700 rounded-full w-5 h-5 animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-20 animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-20 animate-pulse"})]}),(0,c.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-10 animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-12 animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full w-3 h-3 animate-pulse"})]})]}),(0,c.jsxs)("div",{className:"flex items-end justify-between",children:[(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-9 w-[120px] animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-20 animate-pulse"})]})]}),(0,c.jsxs)("div",{className:"flex flex-col justify-between bg-dark-900 rounded h-[114px] p-4 pt-3",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between h-9",children:[(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("div",{className:"bg-dark-700 rounded-full w-5 h-5 animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-20 animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-20 animate-pulse"})]}),(0,c.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-10 animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-12 animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full w-3 h-3 animate-pulse"})]})]}),(0,c.jsxs)("div",{className:"flex items-end justify-between",children:[(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-9 w-[120px] animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-20 animate-pulse"})]})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-2 p-4 border-2 border-dark-700 h-12 rounded",children:[(0,c.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,c.jsx)("div",{className:"bg-dark-700 rounded-full w-3 h-3 animate-pulse"}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full h-5 w-10 animate-pulse"})]}),(0,c.jsx)("div",{className:"bg-dark-700 rounded-full w-5 h-5 animate-pulse"})]}),(0,c.jsx)("div",{className:"rounded animate-pulse bg-dark-700 h-[52px]"})]})},Ze=function(e){var t=e.receiveToWallet,r=e.withdrawAmount,n=e.removeMax,s=(0,M.aQ)().account,i=(0,a.mV)().i18n,o=q().market,d=(0,M.aQ)().chainId,u=(0,F.C)(null!==s&&void 0!==s?s:void 0,(0,I.Bv)(o.asset.token),!1),x=(0,l.useState)(),m=x[0],h=x[1],v=(0,l.useState)(),f=v[0],p=v[1],g=(0,D.rO)(),w=d?j.MO[d]:void 0,b=(0,l.useState)(!1),N=b[0],A=b[1],_=s?null!==r&&void 0!==r&&r.greaterThan(j.xE)?u?"":i._(i._("Loading balance")):i._(i._("Enter an amount")):i._(i._("Connect Wallet")),Z=_||(null!==r&&void 0!==r&&r.greaterThan(j.xE)?i._(i._("Withdraw")):"");return(0,c.jsxs)(c.Fragment,{children:[f&&(0,c.jsx)(y.Z,{variant:"sm",className:"p-4 text-center border rounded border-yellow/40 text-yellow",children:i._(i._("Something went wrong during signing of the approval. This is expected for hardware wallets, such as Trezor and Ledger. Click 'Approve BentoBox' again for approving using the fallback method"))}),(0,c.jsx)(W.Z,{spendFromWallet:t,inputAmounts:[r],tokenApproveOn:null===g||void 0===g?void 0:g.address,masterContractAddress:w,withPermit:!0,permit:m,onPermit:h,onPermitError:function(){return p(!0)},children:function(e){var t=e.approved,r=e.loading,n=!!_||!t||r;return(0,c.jsx)(k.ZP,{loading:r,color:"gradient",disabled:n,onClick:function(){return A(!0)},className:"rounded-2xl md:rounded",children:Z})}}),(0,c.jsx)(Se,{open:N,onDismiss:function(){return A(!1)},receiveToWallet:t,withdrawAmount:r,removeMax:n,permit:m})]})},Se=function(e){var t=e.withdrawAmount,r=e.receiveToWallet,s=e.open,i=e.onDismiss,o=e.permit,d=e.removeMax,x=(0,a.mV)().i18n,m=(0,l.useState)(),v=m[0],f=m[1],p=(0,l.useState)(!1),g=p[0],j=p[1],w=Be(),b=(0,l.useCallback)((0,u.Z)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,w({withdrawAmount:t,receiveToWallet:r,permit:o,removeMax:d});case 4:null!==(n=e.sent)&&void 0!==n&&n.hash&&f(n.hash);case 6:return e.prev=6,j(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])}))),[w,o,r,d,t]);return(0,c.jsx)(V.S.Controlled,{isOpen:s,onDismiss:i,maxWidth:"md",afterLeave:function(){return f(void 0)},children:v?(0,c.jsx)(K.Z,{header:x._(x._("Success!")),subheader:x._(x._("Success! Withdraw Submitted")),txHash:v,onDismiss:i}):(0,c.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,c.jsx)(V.S.Header,{header:x._(x._("Confirm Withdraw")),onClose:i}),(0,c.jsx)(V.S.BorderedContent,{className:"flex flex-col gap-4 bg-dark-1000/40 !border-dark-700",children:(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z,{variant:"xs",className:"text-secondary",children:x._(x._("Withdrawing"))}),(0,c.jsxs)("div",{className:"inline-flex gap-2",children:[(0,c.jsx)(U.X,{currency:null===t||void 0===t?void 0:t.currency,size:20}),(0,c.jsxs)("b",{children:[null===t||void 0===t?void 0:t.toSignificant(6)," ",null===t||void 0===t?void 0:t.currency.symbol]})]})]})}),(0,c.jsx)(de,{view:n.WITHDRAW,lentAmount:t}),(0,c.jsx)(k.ZP,{loading:g,color:"gradient",disabled:g,onClick:b,children:x._(x._("Confirm Withdraw"))})]})})};function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){(0,R.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=function(){var e=(0,a.mV)().i18n,t=q().market,r=(0,l.useState)(),s=r[0],i=r[1],o=(0,l.useState)(!0),d=o[0],u=o[1],x=(0,l.useState)(!1),m=x[0],h=x[1],v=(0,I.Bv)(t.asset.token),f=(0,I.eo)(s,v),p=(0,l.useMemo)((function(){return j.ih.fromRawAmount(t.asset.token,(0,j.LT)(t.maxAssetAvailable,t.currentUserAssetAmount))}),[t.asset.token,t.currentUserAssetAmount,t.maxAssetAvailable]);return(0,c.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,c.jsx)(ae,{setLentAmount:i}),(0,c.jsx)(X.Z,{error:!1,header:function(t){return(0,c.jsx)(X.Z.Header,Oe(Oe({},t),{},{label:e._(e._("Withdraw")),hideSearchModal:!0}))},walletToggle:function(t){return(0,c.jsx)(X.Z.Switch,Oe(Oe({id:"switch-classic-withdraw-from-0}"},t),{},{label:e._(e._("Receive to")),onChange:function(){return u((function(e){return!e}))}}))},spendFromWallet:d,currency:v,value:null===f||void 0===f?void 0:f.toSignificant(6),onChange:function(e){i(e),h(!1)},balancePanel:function(e){var t=e.onChange;return(0,c.jsxs)(y.Z,{variant:"sm",className:"text-right text-secondary",onClick:function(){t(null===p||void 0===p?void 0:p.toExact()),h(!0)},children:["Max: ",null===p||void 0===p?void 0:p.toSignificant(6)]})}}),(0,c.jsx)(de,{view:n.WITHDRAW,lentAmount:f}),(0,c.jsx)(Ze,{withdrawAmount:f,receiveToWallet:d,removeMax:m})]})},Re=r(46440),Be=function(){var e=(0,a.mV)().i18n,t=q().market,r=(0,M.aQ)(),n=r.account,s=r.library,i=r.chainId,o=(0,re.h7)(),c=(0,D.rO)(),d=i&&j.MO[i],x=(0,D.Fe)();return(0,l.useCallback)(function(){var r=(0,u.Z)(h().mark((function r(a){var l,u,m,f,p,g,w,b,y,N,A;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=a.withdrawAmount,u=a.receiveToWallet,m=a.permit,f=a.removeMax,p=void 0!==f&&f,n&&s&&i&&d&&c&&l){r.next=4;break}return console.error("Dependencies unavailable"),r.abrupt("return");case 4:if(g=new te.Z(t,n,s,i),m&&g.approve({account:n,masterContract:d,v:m.v,r:m.r,s:m.s}),w=p?(0,I.LT)(t.userAssetFraction.toString(),t.maxAssetAvailableFraction.toString()):(0,I.To)({base:t.currentTotalAsset.base,elastic:j.QA.BigInt(t.currentAllAssets.toString())},v.O$.from(l.quotient.toString())),!x||!u){r.next=13;break}return b=(0,I.uN)(t.asset.token.wrapped.address,Re.RB,s),r.next=11,b.balanceOf(null===c||void 0===c?void 0:c.address);case 11:y=r.sent,l.greaterThan(y.toString())&&(N=(0,I.To)({base:t.currentTotalAsset.base,elastic:j.QA.BigInt(t.currentAllAssets.toString())},v.O$.from(y)),g.removeAsset(N,!u),g.action(x.address,0,"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000".concat(c.address.slice(2),"0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000006466c6bb0b000000000000000000000000").concat(b.address.slice(2),"0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"),!1,!1,0),w=N.sub(w));case 13:return g.removeAsset(w,!u),r.next=16,g.cook();case 16:if(!(A=r.sent).success){r.next=20;break}return o(A.tx,{summary:e._(e._("Withdraw {0} {1}",{0:l.toSignificant(6),1:l.currency.symbol}))}),r.abrupt("return",A.tx);case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[n,o,c,i,e,s,t,d,x])},Ee=function(e){var t=e.borrowAmount,r=e.collateralAmount,n=e.invert,a=e.trade,s=e.reduce,i=q().market,o=j.ih.fromRawAmount((0,I.Bv)(i.collateral.token),i.userCollateralAmount),l=j.ih.fromRawAmount((0,I.Bv)(i.asset.token),i.currentUserBorrowAmount),c=(0,D.oF)(i.collateral.token),d=(0,$.C)(ee.tE);try{var u=r&&a?r[s?"subtract":"add"](a.minimumAmountOut(d)):r,x=u?o[s?"subtract":"add"](u):o,m=t?l[s?"subtract":"add"](t):l;if(m.equalTo(j.xE))return"None";var h=m&&x&&m.greaterThan(j.xE)?new j.tA({baseAmount:m,quoteAmount:x.multiply(ne.AS)}):void 0,v=Number(null===h||void 0===h?void 0:h.invert().toSignificant(6));return v>Number(null===c||void 0===c?void 0:c.toSignificant(6))||Number(null===h||void 0===h?void 0:h.invert().toSignificant(6))<0?"Instant liquidation":v?n?"1 ".concat(null===m||void 0===m?void 0:m.currency.symbol," = ").concat(null===h||void 0===h?void 0:h.toSignificant(6)," ").concat(null===x||void 0===x?void 0:x.currency.symbol):"1 ".concat(null===x||void 0===x?void 0:x.currency.symbol," = ").concat(null===h||void 0===h?void 0:h.invert().toSignificant(6)," ").concat(null===m||void 0===m?void 0:m.currency.symbol):"None"}catch(f){return console.log(f),"Instant liquidation"}}},81889:function(e,t,r){r.d(t,{AS:function(){return a}});var n=r(31518),a=new n.iA(75,100);new n.gG(50,1e4),new n.iA(95,100)},42802:function(e,t,r){var n=r(2905),a=r(49501),s=r(42144),i=r(13752),o=r(46430),l=r(573),c=r(56785),d=r(31969),u=r(67294),x=r(85893);t.Z=function(){var e=(0,a.mV)().i18n,t=(0,u.useState)(!1),r=t[0],m=t[1];return(0,x.jsx)(o.Z,{trigger:(0,x.jsx)("div",{className:"flex items-center justify-center rounded cursor-pointer lg:w-4 lg:h-4",children:(0,x.jsx)(n.Z,{className:"w-4 h-4 text-high-emphesis"})}),children:function(t){var n=t.setOpen;return(0,x.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,x.jsx)(o.Z.Header,{header:e._(e._("Bentobox")),onClose:function(){return n(!1)}}),(0,x.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,x.jsx)("div",{className:"relative shadow-pink-glow",children:(0,x.jsx)(i.Z,{src:"https://app.sushi.com/images/bentobox/logo.png",width:160,height:120,alt:"BentoBox Logo"})}),(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsx)(c.Z,{variant:"lg",weight:700,className:"text-center text-high-emphesis",children:e._(e._("Sushi utilizes a token vault called BentoBox that has balances separate from your wallet."))}),(0,x.jsx)(c.Z,{variant:"sm",className:"text-center text-secondary",children:e._(e._('You can think of this as having "account balances" for each asset within sushi.com'))})]})]}),(0,x.jsxs)(o.Z.BorderedContent,{className:"flex flex-col",children:[(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-10 flex-grow min-h-[160px]",children:[(0,x.jsxs)("div",{className:"flex flex-col justify-center gap-3",children:[(0,x.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,x.jsxs)("div",{className:(0,d.AK)("flex flex-col gap-1",r?"text-low-emphesis":"text-high-emphesis"),children:[(0,x.jsx)(s.OP,{width:48}),(0,x.jsx)(c.Z,{variant:"xs",className:"text-secondary",children:e._(e._("Bentobox"))})]}),(0,x.jsxs)("div",{className:(0,d.AK)("flex flex-col gap-1",r?"text-high-emphesis":"text-low-emphesis"),children:[(0,x.jsx)(s.o,{width:48}),(0,x.jsx)(c.Z,{variant:"xs",className:"text-secondary",children:e._(e._("Wallet"))})]})]}),(0,x.jsx)(c.Z,{weight:700,variant:"sm",className:"text-center text-high-emphesis",children:e._(e._("You\u2019ll see these icons next to your balance in various input fields."))})]}),(0,x.jsx)("div",{className:"h-full bg-right bg-no-repeat bg-contain",style:{backgroundImage:"url('/images/trident/AssetInputScreenshot.png')"}})]}),(0,x.jsx)("div",{className:"flex flex-col flex-grow min-h-[160px]",children:(0,x.jsxs)("div",{className:"grid flex-grow grid-cols-2",children:[(0,x.jsx)("div",{className:"h-full bg-no-repeat bg-contain",style:{backgroundImage:"url('/images/trident/AssetInputScreenshot2.png')"}}),(0,x.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 p-3 px-8",children:[(0,x.jsx)(l.Z,{checked:r,onChange:m}),(0,x.jsx)(c.Z,{weight:700,variant:"sm",className:"text-center text-high-emphesis",children:e._(e._("Use the toggle to switch between balances when interacting with our platform."))})]})]})}),(0,x.jsxs)(c.Z,{variant:"xs",className:"px-10 mt-5 text-center text-low-emphesis",children:[(0,x.jsx)(c.Z,{variant:"xs",weight:700,component:"span",children:"Tip"}),": ",e._(e._("BentoBox to BentoBox swaps are up to 50% cheaper than normal swaps"))]})]})]})}})}},92088:function(e,t,r){var n=r(13342),a=r(49501),s=r(31518),i=r(71862),o=r(41626),l=r(48410),c=r(54962),d=r(56785),u=r(31969),x=r(15423),m=r(90573),h=r(86047),v=r(12614),f=r(67294),p=r(42802),g=r(85893),j=(0,f.forwardRef)((function(e,t){var r=e.error,n=e.header,a=e.walletToggle,s=e.currency,i=e.value,o=e.onChange,l=e.selected,c=e.onSelect,d=e.spendFromWallet,x=e.priceImpact,m=e.priceImpactCss,h=e.disabled,v=e.inputDisabled,f=e.currencies,p=e.balancePanel,j=e.hideInput;return(0,g.jsxs)("div",{className:(0,u.AK)(h?"pointer-events-none opacity-40":"",r?"border-red-800 hover:border-red-500":"border-dark-700 hover:border-dark-600","rounded-[14px] border bg-dark-900 p-3 flex flex-col gap-4"),children:[n({disabled:h,onChange:o,value:i,currency:s,currencies:f,onSelect:c,walletToggle:a,spendFromWallet:d}),!j&&(0,g.jsxs)("div",{className:"flex gap-1 justify-between items-baseline px-1.5",children:[(0,g.jsx)(w,{ref:t,selected:l,error:r,currency:s,currencies:f,value:i,onChange:o,inputDisabled:v,onSelect:c,priceImpact:x,priceImpactCss:m,spendFromWallet:d}),p?p({disabled:h,currency:s,onChange:o,spendFromWallet:d}):(0,g.jsx)(b,{disabled:h,currency:s,onChange:o,spendFromWallet:d})]})]})})),w=(0,f.forwardRef)((function(e,t){var r,n=e.currency,a=e.value,i=e.onChange,o=e.inputDisabled,c=e.priceImpact,x=(e.priceImpactCss,(0,m.NF)((0,u.eo)(a||"1",n))),h=(0,f.useRef)(null),v=(0,f.useState)(0),p=v[0],j=v[1],w=(0,f.useMemo)((function(){if(c){if(c.lessThan("0"))return"text-green";var e=(0,u.oX)(c);return e<1?"text-primary":e<3?"text-yellow":"text-red"}}),[c]);return(0,f.useEffect)((function(){var e;h.current&&j(a?(null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.clientWidth)+8:60)}),[a]),(0,g.jsxs)(d.Z,{weight:700,variant:"h3",className:"relative flex items-baseline flex-grow gap-3 overflow-hidden",children:[(0,g.jsx)(l.Z,{ref:t,disabled:o,value:a||"",onUserInput:i,placeholder:"0.00",className:"leading-[36px] focus:placeholder:text-low-emphesis flex-grow w-full text-left bg-transparent text-inherit disabled:cursor-not-allowed",autoFocus:!0}),!t&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(d.Z,{variant:"xs",className:"text-secondary absolute bottom-1.5 pointer-events-none",component:"span",style:{left:p},children:[(null===x||void 0===x?void 0:x.greaterThan(s.xE))&&(0,g.jsxs)(g.Fragment,{children:["~",(0,u.uf)(null===x||void 0===x?void 0:x.toFixed(),!0,!0,2)," "]}),c&&(0,g.jsxs)("span",{className:w,children:["(",null===c||void 0===c||null===(r=c.multiply(-1))||void 0===r?void 0:r.toSignificant(2),"%)"]})]}),(0,g.jsx)(d.Z,{variant:"h3",weight:700,className:"relative flex flex-row items-baseline",children:(0,g.jsx)("span",{ref:h,className:"opacity-0 absolute pointer-events-none tracking-[0]",children:"".concat(a||"0.00")})})]})]})})),b=function(e){var t=e.disabled,r=e.currency,n=e.onChange,s=e.spendFromWallet,i=(0,a.mV)().i18n,o=(0,v.aQ)().account,l=(0,x.C)(o||void 0,r,s),c=(0,f.useCallback)((function(){var e;!t&&l&&n&&n(null===(e=(0,u.iN)(l))||void 0===e?void 0:e.toExact())}),[l,t,n]);return(0,g.jsxs)(d.Z,{role:"button",onClick:c,variant:"sm",className:"flex text-secondary whitespace-nowrap",children:[i._(i._("Balance:"))," ",l?l.toSignificant(6):"0.00"]})};t.Z=Object.assign(j,{Header:function(e){var t=e.label,r=e.selectLabel,s=e.walletToggle,l=e.currency,c=e.onSelect,x=e.spendFromWallet,m=e.id,v=e.currencies,f=e.hideSearchModal,p=(0,a.mV)().i18n,j=l?(0,g.jsxs)("div",{id:m,className:(0,u.AK)(f?"":"bg-dark-800 hover:bg-dark-700 cursor-pointer","flex items-center gap-2 px-2 py-1 rounded-full shadow-md text-high-emphesis"),children:[(0,g.jsx)(o.X,{currency:l,className:"!rounded-full overflow-hidden",size:20}),t&&(0,g.jsx)(d.Z,{variant:"sm",className:"!text-xl",weight:700,children:t}),(0,g.jsx)(d.Z,{variant:"sm",className:"!text-xl",weight:700,children:x?l.symbol:l.wrapped.symbol}),!f&&(0,g.jsx)(n.Z,{width:18})]}):(0,g.jsxs)(i.ZP,{color:"blue",variant:"filled",size:"sm",id:m,className:"!rounded-full !px-2 !py-0 !h-[32px] !pl-3",children:[r||p._(p._("Select a Token")),(0,g.jsx)(n.Z,{width:18})]});return(0,g.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,g.jsx)("div",{className:"flex items-center",children:f?j:(0,g.jsx)(h.Z,{selectedCurrency:l,onCurrencySelect:function(e){return c&&c(e)},trigger:j,currencyList:v})}),s&&s({spendFromWallet:x})]})},Switch:function(e){var t=e.label,r=e.onChange,n=e.id,s=e.spendFromWallet,i=e.disabled,o=(0,a.mV)().i18n,l=(0,g.jsxs)(d.Z,{variant:"xs",weight:700,component:"span",className:(0,u.AK)(i?"pointer-events-none opacity-40":"","flex items-center gap-2 !justify-end"),children:[t,(0,g.jsx)(d.Z,{id:n,role:"button",onClick:function(){return r(!s)},variant:"sm",weight:700,component:"span",className:"flex items-center gap-1 px-2 py-1 rounded-full cursor-pointer text-high-emphesis hover:text-white hover:shadow bg-dark-800 hover:bg-dark-700",children:s?o._(o._("Wallet")):o._(o._("BentoBox"))}),(0,g.jsx)(p.Z,{})]});return i?(0,g.jsx)(c.Z,{text:o._(o._("Not available for legacy route")),children:l}):l}})},15423:function(e,t,r){r.d(t,{C:function(){return l},L:function(){return o}});var n=r(31518),a=r(15393),s=r(22986),i=r(67294),o=function(e,t,r){var o=(0,i.useMemo)((function(){return t.every((function(e){return e}))?t.map((function(e){return e.wrapped.address})):void 0}),[t]),l=(0,s.K5)(e,t),c=(0,a.wu)(o).data;return(0,i.useMemo)((function(){return t.every((function(e){return!!e}))&&c?t.map((function(e,t){var a;if(e)return(a=!1===(null===r||void 0===r?void 0:r[t])?c.find((function(t){return(null===t||void 0===t?void 0:t.currency.wrapped.address)===e.wrapped.address})):l.find((function(t){return(null===t||void 0===t?void 0:t.currency.wrapped.address)===e.wrapped.address})))||(a=n.ih.fromRawAmount(e.wrapped,"0")),a}),[]):[]}),[t,c,r,l])},l=function(e,t,r){var n=(0,i.useMemo)((function(){return[t]}),[t]),a=(0,i.useMemo)((function(){return[r]}),[r]),s=o(e,n,a);return(0,i.useMemo)((function(){return s?s[0]:void 0}),[s])}},42388:function(e,t,r){r.d(t,{kG:function(){return n}});var n,a,s=r(50029),i=r(87794),o=r.n(i),l=r(16441),c=r(9279),d=r(57218),u=r(31518),x=r(74703),m=r(12614),h=r(53344),v=r(90849),f=r(36847),p=r(15393),g=r(68411),j=r(67294),w=r(25617),b=r(54907);!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_APPROVED=1]="NOT_APPROVED",e[e.PENDING=2]="PENDING",e[e.FAILED=3]="FAILED",e[e.APPROVED=4]="APPROVED"}(n||(n={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.REJECTED=1]="REJECTED",e[e.FAILED=2]="FAILED",e[e.NOT_READY=3]="NOT_READY"}(a||(a={})),t.ZP=function(){var e=(0,m.aQ)(),t=e.account,r=e.library,i=e.chainId,y=(0,w.I0)(),N=(0,j.useState)(!1),A=N[0],k=N[1],_=(0,j.useState)(void 0),Z=_[0],S=_[1];(0,j.useEffect)((function(){S(void 0)}),[t,i]);var C=i?u.MO[i]:void 0,O=(0,v.Fw)(),P=(0,p.B2)(C,t||c.d),R=(0,g.h7)(),B=(0,j.useMemo)((function(){return C?!P&&O?n.PENDING:P?n.APPROVED:n.NOT_APPROVED:n.UNKNOWN}),[C,P,O]),E=(0,b.rO)(),T=(0,j.useCallback)((0,s.Z)(o().mark((function e(){var s,c,d,u,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B===n.NOT_APPROVED){e.next=3;break}return console.error("approve was called unnecessarily"),e.abrupt("return",{outcome:a.NOT_READY});case 3:if(C){e.next=6;break}return console.error("no token"),e.abrupt("return",{outcome:a.NOT_READY});case 6:if(E){e.next=9;break}return console.error("no bentobox contract"),e.abrupt("return",{outcome:a.NOT_READY});case 9:if(t){e.next=12;break}return console.error("no account"),e.abrupt("return",{outcome:a.NOT_READY});case 12:if(r){e.next=15;break}return console.error("no library"),e.abrupt("return",{outcome:a.NOT_READY});case 15:return e.prev=15,e.next=18,(0,x.D)(E,C,t,r,!0,i);case 18:return s=e.sent,c=(0,l.splitSignature)(s),d=c.v,u=c.r,m=c.s,e.abrupt("return",{outcome:a.SUCCESS,permit:{account:t,masterContract:C,v:d,r:u,s:m}});case 23:return e.prev=23,e.t0=e.catch(15),e.abrupt("return",{outcome:e.t0.code===h.PM?a.REJECTED:a.FAILED});case 26:case"end":return e.stop()}}),e,null,[[15,23]])}))),[B,t,r,i,E,C]),W=function(){var e=(0,s.Z)(o().mark((function e(){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=7;break}return e.next=3,T();case 3:(r=e.sent).outcome===a.SUCCESS?S(r.permit):r.outcome===a.FAILED&&k(!0),e.next=14;break;case 7:return e.next=9,null===E||void 0===E?void 0:E.setMasterContractApproval(t,C,!0,0,d.R,d.R);case 9:return n=e.sent,y((0,f.ZD)("Approve Kashi")),e.next=13,n.wait();case 13:y((0,f.ZD)(""));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,s.Z)(o().mark((function e(a,s){var l,c,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=new x.Z(a,t,r,i),B!==n.NOT_APPROVED||!Z){e.next=9;break}return l.approve(Z),e.next=5,s(l);case 5:e.t0=e.sent,c="Approve Kashi and "+e.t0,e.next=12;break;case 9:return e.next=11,s(l);case 11:c=e.sent;case 12:return e.next=14,l.cook();case 14:if(!(d=e.sent).success){e.next=20;break}return R(d.tx,{summary:c}),S(void 0),e.next=20,d.tx.wait();case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return[B,A,Z,W,I]}},73179:function(e,t,r){r.d(t,{Pf:function(){return x},yz:function(){return d}});var n=r(59499),a=r(72457),s=r(3382),i=r(31969),o=(r(67294),r(76138)),l=r(85893);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var d=function(e){var t=e.children,r=e.className;return(0,l.jsx)("div",{className:(0,i.AK)("flex flex-col gap-3 p-2 md:p-4 pt-4 rounded-[24px] bg-dark-800 shadow-md shadow-dark-1000",r),children:t})},u=function(e){var t=e.children,r=e.id;return(0,l.jsx)(o.Z,{children:(0,l.jsx)(a.Z,{id:r,className:"py-4 md:py-12 lg:py-[120px] px-2 mx-auto",maxWidth:"md",children:(0,l.jsx)(s.Z,{children:t})})})},x=function(e){return function(t){return(0,l.jsx)(u,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:e},t))}}}}]);